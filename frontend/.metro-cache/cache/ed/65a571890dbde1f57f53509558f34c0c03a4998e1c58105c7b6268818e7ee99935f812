{"dependencies":[{"name":"./auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"bPsbxvG/upGRzIWg1D65yZCgVZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _auth = require(_dependencyMap[0], \"./auth\");\n  // Use full backend URL for API calls on all platforms\n  // EXPO_PUBLIC_BACKEND_URL = https://acres-live.preview.emergentagent.com\n  // On native: uses the same URL\n  // On web: cross-origin request to the backend (CORS is allowed for all origins)\n  const BASE_URL = process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function getHeaders(withAuth = true) {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (withAuth) {\n      const token = await (0, _auth.getToken)();\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n    return headers;\n  }\n  async function request(path, options = {}, withAuth = true) {\n    const headers = await getHeaders(withAuth);\n    const response = await fetch(`${BASE_URL}/api${path}`, {\n      ...options,\n      headers: {\n        ...headers,\n        ...(options.headers || {})\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.detail || data.message || 'Request failed');\n    }\n    return data;\n  }\n  const api = {\n    // Auth\n    register: (username, email, password) => request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        email,\n        password\n      })\n    }, false),\n    login: (email, password) => request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }, false),\n    getMe: () => request('/auth/me'),\n    // Runs\n    startRun: () => request('/runs/start', {\n      method: 'POST'\n    }),\n    endRun: (runId, coordinates) => request('/runs/end', {\n      method: 'POST',\n      body: JSON.stringify({\n        runId,\n        coordinates\n      })\n    }),\n    getUserRuns: userId => request(`/runs/${userId}`),\n    getRunDetail: runId => request(`/runs/detail/${runId}`),\n    // Territories\n    getTerritories: (minLng, minLat, maxLng, maxLat) => request(`/territories?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`),\n    getUserTerritories: userId => request(`/territories/user/${userId}`),\n    // Leaderboard\n    getGlobalLeaderboard: () => request('/leaderboard/global'),\n    // Profile\n    getUserProfile: userId => request(`/users/${userId}/profile`),\n    updateProfile: (userId, data) => request(`/users/${userId}/profile`, {\n      method: 'PUT',\n      body: JSON.stringify(data)\n    })\n  };\n});","lineCount":89,"map":[[7,2,36,0,"Object"],[7,8,36,0],[7,9,36,0,"defineProperty"],[7,23,36,0],[7,24,36,0,"exports"],[7,31,36,0],[8,4,36,0,"enumerable"],[8,14,36,0],[9,4,36,0,"get"],[9,7,36,0],[9,18,36,0,"get"],[9,19,36,0],[10,6,36,0],[10,13,36,0,"api"],[10,16,36,0],[11,4,36,0],[12,2,36,0],[13,2,1,0],[13,6,1,0,"_auth"],[13,11,1,0],[13,14,1,0,"require"],[13,21,1,0],[13,22,1,0,"_dependencyMap"],[13,36,1,0],[14,2,4,0],[15,2,5,0],[16,2,6,0],[17,2,7,0],[18,2,8,0],[18,8,8,6,"BASE_URL"],[18,16,8,14],[18,19,8,17,"process"],[18,26,8,24],[18,27,8,25,"env"],[18,30,8,28],[18,31,8,29,"EXPO_PUBLIC_BACKEND_URL"],[18,54,8,52],[18,58,8,56],[18,60,8,58],[19,2,10,0],[19,17,10,15,"getHeaders"],[19,27,10,25,"getHeaders"],[19,28,10,26,"withAuth"],[19,36,10,34],[19,39,10,37],[19,43,10,41],[19,45,10,76],[20,4,11,2],[20,10,11,8,"headers"],[20,17,11,39],[20,20,11,42],[21,6,12,4],[21,20,12,18],[21,22,12,20],[22,4,13,2],[22,5,13,3],[23,4,14,2],[23,8,14,6,"withAuth"],[23,16,14,14],[23,18,14,16],[24,6,15,4],[24,12,15,10,"token"],[24,17,15,15],[24,20,15,18],[24,26,15,24],[24,30,15,24,"getToken"],[24,35,15,32],[24,36,15,32,"getToken"],[24,44,15,32],[24,46,15,33],[24,47,15,34],[25,6,16,4],[25,10,16,8,"token"],[25,15,16,13],[25,17,16,15],[26,8,17,6,"headers"],[26,15,17,13],[26,16,17,14],[26,31,17,29],[26,32,17,30],[26,35,17,33],[26,45,17,43,"token"],[26,50,17,48],[26,52,17,50],[27,6,18,4],[28,4,19,2],[29,4,20,2],[29,11,20,9,"headers"],[29,18,20,16],[30,2,21,0],[31,2,23,0],[31,17,23,15,"request"],[31,24,23,22,"request"],[31,25,23,26,"path"],[31,29,23,38],[31,31,23,40,"options"],[31,38,23,60],[31,41,23,63],[31,42,23,64],[31,43,23,65],[31,45,23,67,"withAuth"],[31,53,23,75],[31,56,23,78],[31,60,23,82],[31,62,23,96],[32,4,24,2],[32,10,24,8,"headers"],[32,17,24,15],[32,20,24,18],[32,26,24,24,"getHeaders"],[32,36,24,34],[32,37,24,35,"withAuth"],[32,45,24,43],[32,46,24,44],[33,4,25,2],[33,10,25,8,"response"],[33,18,25,16],[33,21,25,19],[33,27,25,25,"fetch"],[33,32,25,30],[33,33,25,31],[33,36,25,34,"BASE_URL"],[33,44,25,42],[33,51,25,49,"path"],[33,55,25,53],[33,57,25,55],[33,59,25,57],[34,6,26,4],[34,9,26,7,"options"],[34,16,26,14],[35,6,27,4,"headers"],[35,13,27,11],[35,15,27,13],[36,8,27,15],[36,11,27,18,"headers"],[36,18,27,25],[37,8,27,27],[37,12,27,31,"options"],[37,19,27,38],[37,20,27,39,"headers"],[37,27,27,46],[37,31,27,50],[37,32,27,51],[37,33,27,52],[38,6,27,54],[39,4,28,2],[39,5,28,3],[39,6,28,4],[40,4,29,2],[40,10,29,8,"data"],[40,14,29,12],[40,17,29,15],[40,23,29,21,"response"],[40,31,29,29],[40,32,29,30,"json"],[40,36,29,34],[40,37,29,35],[40,38,29,36],[41,4,30,2],[41,8,30,6],[41,9,30,7,"response"],[41,17,30,15],[41,18,30,16,"ok"],[41,20,30,18],[41,22,30,20],[42,6,31,4],[42,12,31,10],[42,16,31,14,"Error"],[42,21,31,19],[42,22,31,20,"data"],[42,26,31,24],[42,27,31,25,"detail"],[42,33,31,31],[42,37,31,35,"data"],[42,41,31,39],[42,42,31,40,"message"],[42,49,31,47],[42,53,31,51],[42,69,31,67],[42,70,31,68],[43,4,32,2],[44,4,33,2],[44,11,33,9,"data"],[44,15,33,13],[45,2,34,0],[46,2,36,7],[46,8,36,13,"api"],[46,11,36,16],[46,14,36,19],[47,4,37,2],[48,4,38,2,"register"],[48,12,38,10],[48,14,38,12,"register"],[48,15,38,13,"username"],[48,23,38,29],[48,25,38,31,"email"],[48,30,38,44],[48,32,38,46,"password"],[48,40,38,62],[48,45,39,4,"request"],[48,52,39,11],[48,53,39,12],[48,69,39,28],[48,71,39,30],[49,6,39,32,"method"],[49,12,39,38],[49,14,39,40],[49,20,39,46],[50,6,39,48,"body"],[50,10,39,52],[50,12,39,54,"JSON"],[50,16,39,58],[50,17,39,59,"stringify"],[50,26,39,68],[50,27,39,69],[51,8,39,71,"username"],[51,16,39,79],[52,8,39,81,"email"],[52,13,39,86],[53,8,39,88,"password"],[54,6,39,97],[54,7,39,98],[55,4,39,100],[55,5,39,101],[55,7,39,103],[55,12,39,108],[55,13,39,109],[56,4,41,2,"login"],[56,9,41,7],[56,11,41,9,"login"],[56,12,41,10,"email"],[56,17,41,23],[56,19,41,25,"password"],[56,27,41,41],[56,32,42,4,"request"],[56,39,42,11],[56,40,42,12],[56,53,42,25],[56,55,42,27],[57,6,42,29,"method"],[57,12,42,35],[57,14,42,37],[57,20,42,43],[58,6,42,45,"body"],[58,10,42,49],[58,12,42,51,"JSON"],[58,16,42,55],[58,17,42,56,"stringify"],[58,26,42,65],[58,27,42,66],[59,8,42,68,"email"],[59,13,42,73],[60,8,42,75,"password"],[61,6,42,84],[61,7,42,85],[62,4,42,87],[62,5,42,88],[62,7,42,90],[62,12,42,95],[62,13,42,96],[63,4,44,2,"getMe"],[63,9,44,7],[63,11,44,9,"getMe"],[63,12,44,9],[63,17,44,15,"request"],[63,24,44,22],[63,25,44,23],[63,35,44,33],[63,36,44,34],[64,4,46,2],[65,4,47,2,"startRun"],[65,12,47,10],[65,14,47,12,"startRun"],[65,15,47,12],[65,20,47,18,"request"],[65,27,47,25],[65,28,47,26],[65,41,47,39],[65,43,47,41],[66,6,47,43,"method"],[66,12,47,49],[66,14,47,51],[67,4,47,58],[67,5,47,59],[67,6,47,60],[68,4,49,2,"endRun"],[68,10,49,8],[68,12,49,10,"endRun"],[68,13,49,11,"runId"],[68,18,49,24],[68,20,49,26,"coordinates"],[68,31,49,49],[68,36,50,4,"request"],[68,43,50,11],[68,44,50,12],[68,55,50,23],[68,57,50,25],[69,6,50,27,"method"],[69,12,50,33],[69,14,50,35],[69,20,50,41],[70,6,50,43,"body"],[70,10,50,47],[70,12,50,49,"JSON"],[70,16,50,53],[70,17,50,54,"stringify"],[70,26,50,63],[70,27,50,64],[71,8,50,66,"runId"],[71,13,50,71],[72,8,50,73,"coordinates"],[73,6,50,85],[73,7,50,86],[74,4,50,88],[74,5,50,89],[74,6,50,90],[75,4,52,2,"getUserRuns"],[75,15,52,13],[75,17,52,16,"userId"],[75,23,52,30],[75,27,52,35,"request"],[75,34,52,42],[75,35,52,43],[75,44,52,52,"userId"],[75,50,52,58],[75,52,52,60],[75,53,52,61],[76,4,54,2,"getRunDetail"],[76,16,54,14],[76,18,54,17,"runId"],[76,23,54,30],[76,27,54,35,"request"],[76,34,54,42],[76,35,54,43],[76,51,54,59,"runId"],[76,56,54,64],[76,58,54,66],[76,59,54,67],[77,4,56,2],[78,4,57,2,"getTerritories"],[78,18,57,16],[78,20,57,18,"getTerritories"],[78,21,57,19,"minLng"],[78,27,57,33],[78,29,57,35,"minLat"],[78,35,57,49],[78,37,57,51,"maxLng"],[78,43,57,65],[78,45,57,67,"maxLat"],[78,51,57,81],[78,56,58,4,"request"],[78,63,58,11],[78,64,58,12],[78,87,58,35,"minLng"],[78,93,58,41],[78,104,58,52,"minLat"],[78,110,58,58],[78,121,58,69,"maxLng"],[78,127,58,75],[78,138,58,86,"maxLat"],[78,144,58,92],[78,146,58,94],[78,147,58,95],[79,4,60,2,"getUserTerritories"],[79,22,60,20],[79,24,60,23,"userId"],[79,30,60,37],[79,34,60,42,"request"],[79,41,60,49],[79,42,60,50],[79,63,60,71,"userId"],[79,69,60,77],[79,71,60,79],[79,72,60,80],[80,4,62,2],[81,4,63,2,"getGlobalLeaderboard"],[81,24,63,22],[81,26,63,24,"getGlobalLeaderboard"],[81,27,63,24],[81,32,63,30,"request"],[81,39,63,37],[81,40,63,38],[81,61,63,59],[81,62,63,60],[82,4,65,2],[83,4,66,2,"getUserProfile"],[83,18,66,16],[83,20,66,19,"userId"],[83,26,66,33],[83,30,66,38,"request"],[83,37,66,45],[83,38,66,46],[83,48,66,56,"userId"],[83,54,66,62],[83,64,66,72],[83,65,66,73],[84,4,68,2,"updateProfile"],[84,17,68,15],[84,19,68,17,"updateProfile"],[84,20,68,18,"userId"],[84,26,68,32],[84,28,68,34,"data"],[84,32,68,81],[84,37,69,4,"request"],[84,44,69,11],[84,45,69,12],[84,55,69,22,"userId"],[84,61,69,28],[84,71,69,38],[84,73,69,40],[85,6,69,42,"method"],[85,12,69,48],[85,14,69,50],[85,19,69,55],[86,6,69,57,"body"],[86,10,69,61],[86,12,69,63,"JSON"],[86,16,69,67],[86,17,69,68,"stringify"],[86,26,69,77],[86,27,69,78,"data"],[86,31,69,82],[87,4,69,84],[87,5,69,85],[88,2,70,0],[88,3,70,1],[89,0,70,2],[89,3]],"functionMap":{"names":["<global>","getHeaders","request","register","login","getMe","startRun","endRun","getUserRuns","getRunDetail","getTerritories","getUserTerritories","getGlobalLeaderboard","getUserProfile","updateProfile"],"mappings":"AAA;ACS;CDW;AEE;CFW;YGI;6GHC;SIE;gGJC;SKE,yBL;YMG,gDN;UOE;0FPC;eQE,8CR;gBSE,mDT;kBUG;+FVC;sBWE,0DX;wBYG,oCZ;kBaG,uDb;iBcE;sFdC"},"hasCjsExports":false},"type":"js/module"}]}