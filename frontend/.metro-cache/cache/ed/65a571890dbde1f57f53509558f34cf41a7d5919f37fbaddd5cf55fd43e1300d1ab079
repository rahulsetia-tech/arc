{"dependencies":[{"name":"./auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"bPsbxvG/upGRzIWg1D65yZCgVZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _auth = require(_dependencyMap[0], \"./auth\");\n  // Use full backend URL for API calls on all platforms\n  const BASE_URL = process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function getHeaders(withAuth = true) {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (withAuth) {\n      const token = await (0, _auth.getToken)();\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n    return headers;\n  }\n  async function request(path, options = {}, withAuth = true) {\n    const headers = await getHeaders(withAuth);\n    const response = await fetch(`${BASE_URL}/api${path}`, {\n      ...options,\n      headers: {\n        ...headers,\n        ...(options.headers || {})\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.detail || data.message || 'Request failed');\n    }\n    return data;\n  }\n  const api = {\n    // Auth\n    register: (username, email, password) => request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        email,\n        password\n      })\n    }, false),\n    login: (email, password) => request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }, false),\n    getMe: () => request('/auth/me'),\n    // Runs\n    startRun: () => request('/runs/start', {\n      method: 'POST'\n    }),\n    endRun: (runId, coordinates) => request('/runs/end', {\n      method: 'POST',\n      body: JSON.stringify({\n        runId,\n        coordinates\n      })\n    }),\n    getUserRuns: userId => request(`/runs/${userId}`),\n    getRunDetail: runId => request(`/runs/detail/${runId}`),\n    // Territories\n    getTerritories: (minLng, minLat, maxLng, maxLat) => request(`/territories?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`),\n    getUserTerritories: userId => request(`/territories/user/${userId}`),\n    // Leaderboard\n    getGlobalLeaderboard: () => request('/leaderboard/global'),\n    // FIX 4: Local leaderboard\n    getLocalLeaderboard: (lat, lng, radiusKm = 20) => request(`/leaderboard/local?lat=${lat}&lng=${lng}&radius_km=${radiusKm}`),\n    // Profile\n    getUserProfile: userId => request(`/users/${userId}/profile`),\n    updateProfile: (userId, data) => request(`/users/${userId}/profile`, {\n      method: 'PUT',\n      body: JSON.stringify(data)\n    })\n  };\n});","lineCount":88,"map":[[7,2,32,0,"Object"],[7,8,32,0],[7,9,32,0,"defineProperty"],[7,23,32,0],[7,24,32,0,"exports"],[7,31,32,0],[8,4,32,0,"enumerable"],[8,14,32,0],[9,4,32,0,"get"],[9,7,32,0],[9,18,32,0,"get"],[9,19,32,0],[10,6,32,0],[10,13,32,0,"api"],[10,16,32,0],[11,4,32,0],[12,2,32,0],[13,2,1,0],[13,6,1,0,"_auth"],[13,11,1,0],[13,14,1,0,"require"],[13,21,1,0],[13,22,1,0,"_dependencyMap"],[13,36,1,0],[14,2,3,0],[15,2,4,0],[15,8,4,6,"BASE_URL"],[15,16,4,14],[15,19,4,17,"process"],[15,26,4,24],[15,27,4,25,"env"],[15,30,4,28],[15,31,4,29,"EXPO_PUBLIC_BACKEND_URL"],[15,54,4,52],[15,58,4,56],[15,60,4,58],[16,2,6,0],[16,17,6,15,"getHeaders"],[16,27,6,25,"getHeaders"],[16,28,6,26,"withAuth"],[16,36,6,34],[16,39,6,37],[16,43,6,41],[16,45,6,76],[17,4,7,2],[17,10,7,8,"headers"],[17,17,7,39],[17,20,7,42],[18,6,8,4],[18,20,8,18],[18,22,8,20],[19,4,9,2],[19,5,9,3],[20,4,10,2],[20,8,10,6,"withAuth"],[20,16,10,14],[20,18,10,16],[21,6,11,4],[21,12,11,10,"token"],[21,17,11,15],[21,20,11,18],[21,26,11,24],[21,30,11,24,"getToken"],[21,35,11,32],[21,36,11,32,"getToken"],[21,44,11,32],[21,46,11,33],[21,47,11,34],[22,6,12,4],[22,10,12,8,"token"],[22,15,12,13],[22,17,12,15],[23,8,13,6,"headers"],[23,15,13,13],[23,16,13,14],[23,31,13,29],[23,32,13,30],[23,35,13,33],[23,45,13,43,"token"],[23,50,13,48],[23,52,13,50],[24,6,14,4],[25,4,15,2],[26,4,16,2],[26,11,16,9,"headers"],[26,18,16,16],[27,2,17,0],[28,2,19,0],[28,17,19,15,"request"],[28,24,19,22,"request"],[28,25,19,26,"path"],[28,29,19,38],[28,31,19,40,"options"],[28,38,19,60],[28,41,19,63],[28,42,19,64],[28,43,19,65],[28,45,19,67,"withAuth"],[28,53,19,75],[28,56,19,78],[28,60,19,82],[28,62,19,96],[29,4,20,2],[29,10,20,8,"headers"],[29,17,20,15],[29,20,20,18],[29,26,20,24,"getHeaders"],[29,36,20,34],[29,37,20,35,"withAuth"],[29,45,20,43],[29,46,20,44],[30,4,21,2],[30,10,21,8,"response"],[30,18,21,16],[30,21,21,19],[30,27,21,25,"fetch"],[30,32,21,30],[30,33,21,31],[30,36,21,34,"BASE_URL"],[30,44,21,42],[30,51,21,49,"path"],[30,55,21,53],[30,57,21,55],[30,59,21,57],[31,6,22,4],[31,9,22,7,"options"],[31,16,22,14],[32,6,23,4,"headers"],[32,13,23,11],[32,15,23,13],[33,8,23,15],[33,11,23,18,"headers"],[33,18,23,25],[34,8,23,27],[34,12,23,31,"options"],[34,19,23,38],[34,20,23,39,"headers"],[34,27,23,46],[34,31,23,50],[34,32,23,51],[34,33,23,52],[35,6,23,54],[36,4,24,2],[36,5,24,3],[36,6,24,4],[37,4,25,2],[37,10,25,8,"data"],[37,14,25,12],[37,17,25,15],[37,23,25,21,"response"],[37,31,25,29],[37,32,25,30,"json"],[37,36,25,34],[37,37,25,35],[37,38,25,36],[38,4,26,2],[38,8,26,6],[38,9,26,7,"response"],[38,17,26,15],[38,18,26,16,"ok"],[38,20,26,18],[38,22,26,20],[39,6,27,4],[39,12,27,10],[39,16,27,14,"Error"],[39,21,27,19],[39,22,27,20,"data"],[39,26,27,24],[39,27,27,25,"detail"],[39,33,27,31],[39,37,27,35,"data"],[39,41,27,39],[39,42,27,40,"message"],[39,49,27,47],[39,53,27,51],[39,69,27,67],[39,70,27,68],[40,4,28,2],[41,4,29,2],[41,11,29,9,"data"],[41,15,29,13],[42,2,30,0],[43,2,32,7],[43,8,32,13,"api"],[43,11,32,16],[43,14,32,19],[44,4,33,2],[45,4,34,2,"register"],[45,12,34,10],[45,14,34,12,"register"],[45,15,34,13,"username"],[45,23,34,29],[45,25,34,31,"email"],[45,30,34,44],[45,32,34,46,"password"],[45,40,34,62],[45,45,35,4,"request"],[45,52,35,11],[45,53,35,12],[45,69,35,28],[45,71,35,30],[46,6,35,32,"method"],[46,12,35,38],[46,14,35,40],[46,20,35,46],[47,6,35,48,"body"],[47,10,35,52],[47,12,35,54,"JSON"],[47,16,35,58],[47,17,35,59,"stringify"],[47,26,35,68],[47,27,35,69],[48,8,35,71,"username"],[48,16,35,79],[49,8,35,81,"email"],[49,13,35,86],[50,8,35,88,"password"],[51,6,35,97],[51,7,35,98],[52,4,35,100],[52,5,35,101],[52,7,35,103],[52,12,35,108],[52,13,35,109],[53,4,37,2,"login"],[53,9,37,7],[53,11,37,9,"login"],[53,12,37,10,"email"],[53,17,37,23],[53,19,37,25,"password"],[53,27,37,41],[53,32,38,4,"request"],[53,39,38,11],[53,40,38,12],[53,53,38,25],[53,55,38,27],[54,6,38,29,"method"],[54,12,38,35],[54,14,38,37],[54,20,38,43],[55,6,38,45,"body"],[55,10,38,49],[55,12,38,51,"JSON"],[55,16,38,55],[55,17,38,56,"stringify"],[55,26,38,65],[55,27,38,66],[56,8,38,68,"email"],[56,13,38,73],[57,8,38,75,"password"],[58,6,38,84],[58,7,38,85],[59,4,38,87],[59,5,38,88],[59,7,38,90],[59,12,38,95],[59,13,38,96],[60,4,40,2,"getMe"],[60,9,40,7],[60,11,40,9,"getMe"],[60,12,40,9],[60,17,40,15,"request"],[60,24,40,22],[60,25,40,23],[60,35,40,33],[60,36,40,34],[61,4,42,2],[62,4,43,2,"startRun"],[62,12,43,10],[62,14,43,12,"startRun"],[62,15,43,12],[62,20,43,18,"request"],[62,27,43,25],[62,28,43,26],[62,41,43,39],[62,43,43,41],[63,6,43,43,"method"],[63,12,43,49],[63,14,43,51],[64,4,43,58],[64,5,43,59],[64,6,43,60],[65,4,45,2,"endRun"],[65,10,45,8],[65,12,45,10,"endRun"],[65,13,45,11,"runId"],[65,18,45,24],[65,20,45,26,"coordinates"],[65,31,45,49],[65,36,46,4,"request"],[65,43,46,11],[65,44,46,12],[65,55,46,23],[65,57,46,25],[66,6,46,27,"method"],[66,12,46,33],[66,14,46,35],[66,20,46,41],[67,6,46,43,"body"],[67,10,46,47],[67,12,46,49,"JSON"],[67,16,46,53],[67,17,46,54,"stringify"],[67,26,46,63],[67,27,46,64],[68,8,46,66,"runId"],[68,13,46,71],[69,8,46,73,"coordinates"],[70,6,46,85],[70,7,46,86],[71,4,46,88],[71,5,46,89],[71,6,46,90],[72,4,48,2,"getUserRuns"],[72,15,48,13],[72,17,48,16,"userId"],[72,23,48,30],[72,27,48,35,"request"],[72,34,48,42],[72,35,48,43],[72,44,48,52,"userId"],[72,50,48,58],[72,52,48,60],[72,53,48,61],[73,4,50,2,"getRunDetail"],[73,16,50,14],[73,18,50,17,"runId"],[73,23,50,30],[73,27,50,35,"request"],[73,34,50,42],[73,35,50,43],[73,51,50,59,"runId"],[73,56,50,64],[73,58,50,66],[73,59,50,67],[74,4,52,2],[75,4,53,2,"getTerritories"],[75,18,53,16],[75,20,53,18,"getTerritories"],[75,21,53,19,"minLng"],[75,27,53,33],[75,29,53,35,"minLat"],[75,35,53,49],[75,37,53,51,"maxLng"],[75,43,53,65],[75,45,53,67,"maxLat"],[75,51,53,81],[75,56,54,4,"request"],[75,63,54,11],[75,64,54,12],[75,87,54,35,"minLng"],[75,93,54,41],[75,104,54,52,"minLat"],[75,110,54,58],[75,121,54,69,"maxLng"],[75,127,54,75],[75,138,54,86,"maxLat"],[75,144,54,92],[75,146,54,94],[75,147,54,95],[76,4,56,2,"getUserTerritories"],[76,22,56,20],[76,24,56,23,"userId"],[76,30,56,37],[76,34,56,42,"request"],[76,41,56,49],[76,42,56,50],[76,63,56,71,"userId"],[76,69,56,77],[76,71,56,79],[76,72,56,80],[77,4,58,2],[78,4,59,2,"getGlobalLeaderboard"],[78,24,59,22],[78,26,59,24,"getGlobalLeaderboard"],[78,27,59,24],[78,32,59,30,"request"],[78,39,59,37],[78,40,59,38],[78,61,59,59],[78,62,59,60],[79,4,61,2],[80,4,62,2,"getLocalLeaderboard"],[80,23,62,21],[80,25,62,23,"getLocalLeaderboard"],[80,26,62,24,"lat"],[80,29,62,35],[80,31,62,37,"lng"],[80,34,62,48],[80,36,62,50,"radiusKm"],[80,44,62,66],[80,47,62,69],[80,49,62,71],[80,54,63,4,"request"],[80,61,63,11],[80,62,63,12],[80,88,63,38,"lat"],[80,91,63,41],[80,99,63,49,"lng"],[80,102,63,52],[80,116,63,66,"radiusKm"],[80,124,63,74],[80,126,63,76],[80,127,63,77],[81,4,65,2],[82,4,66,2,"getUserProfile"],[82,18,66,16],[82,20,66,19,"userId"],[82,26,66,33],[82,30,66,38,"request"],[82,37,66,45],[82,38,66,46],[82,48,66,56,"userId"],[82,54,66,62],[82,64,66,72],[82,65,66,73],[83,4,68,2,"updateProfile"],[83,17,68,15],[83,19,68,17,"updateProfile"],[83,20,68,18,"userId"],[83,26,68,32],[83,28,68,34,"data"],[83,32,68,81],[83,37,69,4,"request"],[83,44,69,11],[83,45,69,12],[83,55,69,22,"userId"],[83,61,69,28],[83,71,69,38],[83,73,69,40],[84,6,69,42,"method"],[84,12,69,48],[84,14,69,50],[84,19,69,55],[85,6,69,57,"body"],[85,10,69,61],[85,12,69,63,"JSON"],[85,16,69,67],[85,17,69,68,"stringify"],[85,26,69,77],[85,27,69,78,"data"],[85,31,69,82],[86,4,69,84],[86,5,69,85],[87,2,70,0],[87,3,70,1],[88,0,70,2],[88,3]],"functionMap":{"names":["<global>","getHeaders","request","register","login","getMe","startRun","endRun","getUserRuns","getRunDetail","getTerritories","getUserTerritories","getGlobalLeaderboard","getLocalLeaderboard","getUserProfile","updateProfile"],"mappings":"AAA;ACK;CDW;AEE;CFW;YGI;6GHC;SIE;gGJC;SKE,yBL;YMG,gDN;UOE;0FPC;eQE,8CR;gBSE,mDT;kBUG;+FVC;sBWE,0DX;wBYG,oCZ;uBaG;6EbC;kBcG,uDd;iBeE;sFfC"},"hasCjsExports":false},"type":"js/module"}]}