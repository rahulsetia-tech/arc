{"dependencies":[{"name":"./auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"bPsbxvG/upGRzIWg1D65yZCgVZE=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _auth = require(_dependencyMap[0], \"./auth\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  // On web, use relative URL so the proxy routes /api/* to port 8001\n  // On native, use the full backend URL\n  const BASE_URL = Platform.default.OS === 'web' ? '' : process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function getHeaders(withAuth = true) {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (withAuth) {\n      const token = await (0, _auth.getToken)();\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n    return headers;\n  }\n  async function request(path, options = {}, withAuth = true) {\n    const headers = await getHeaders(withAuth);\n    const response = await fetch(`${BASE_URL}/api${path}`, {\n      ...options,\n      headers: {\n        ...headers,\n        ...(options.headers || {})\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.detail || data.message || 'Request failed');\n    }\n    return data;\n  }\n  const api = {\n    // Auth\n    register: (username, email, password) => request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        email,\n        password\n      })\n    }, false),\n    login: (email, password) => request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }, false),\n    getMe: () => request('/auth/me'),\n    // Runs\n    startRun: () => request('/runs/start', {\n      method: 'POST'\n    }),\n    endRun: (runId, coordinates) => request('/runs/end', {\n      method: 'POST',\n      body: JSON.stringify({\n        runId,\n        coordinates\n      })\n    }),\n    getUserRuns: userId => request(`/runs/${userId}`),\n    getRunDetail: runId => request(`/runs/detail/${runId}`),\n    // Territories\n    getTerritories: (minLng, minLat, maxLng, maxLat) => request(`/territories?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`),\n    getUserTerritories: userId => request(`/territories/user/${userId}`),\n    // Leaderboard\n    getGlobalLeaderboard: () => request('/leaderboard/global'),\n    // Profile\n    getUserProfile: userId => request(`/users/${userId}/profile`),\n    updateProfile: (userId, data) => request(`/users/${userId}/profile`, {\n      method: 'PUT',\n      body: JSON.stringify(data)\n    })\n  };\n});","lineCount":94,"map":[[12,2,36,0,"Object"],[12,8,36,0],[12,9,36,0,"defineProperty"],[12,23,36,0],[12,24,36,0,"exports"],[12,31,36,0],[13,4,36,0,"enumerable"],[13,14,36,0],[14,4,36,0,"get"],[14,7,36,0],[14,18,36,0,"get"],[14,19,36,0],[15,6,36,0],[15,13,36,0,"api"],[15,16,36,0],[16,4,36,0],[17,2,36,0],[18,2,1,0],[18,6,1,0,"_auth"],[18,11,1,0],[18,14,1,0,"require"],[18,21,1,0],[18,22,1,0,"_dependencyMap"],[18,36,1,0],[19,2,1,34],[19,6,1,34,"_reactNativeWebDistExportsPlatform"],[19,40,1,34],[19,43,1,34,"require"],[19,50,1,34],[19,51,1,34,"_dependencyMap"],[19,65,1,34],[20,2,1,34],[20,6,1,34,"Platform"],[20,14,1,34],[20,17,1,34,"_interopDefault"],[20,32,1,34],[20,33,1,34,"_reactNativeWebDistExportsPlatform"],[20,67,1,34],[21,2,4,0],[22,2,5,0],[23,2,6,0],[23,8,6,6,"BASE_URL"],[23,16,6,14],[23,19,6,17,"Platform"],[23,27,6,25],[23,28,6,25,"default"],[23,35,6,25],[23,36,6,26,"OS"],[23,38,6,28],[23,43,6,33],[23,48,6,38],[23,51,7,4],[23,53,7,6],[23,56,8,5,"process"],[23,63,8,12],[23,64,8,13,"env"],[23,67,8,16],[23,68,8,17,"EXPO_PUBLIC_BACKEND_URL"],[23,91,8,40],[23,95,8,44],[23,97,8,47],[24,2,10,0],[24,17,10,15,"getHeaders"],[24,27,10,25,"getHeaders"],[24,28,10,26,"withAuth"],[24,36,10,34],[24,39,10,37],[24,43,10,41],[24,45,10,76],[25,4,11,2],[25,10,11,8,"headers"],[25,17,11,39],[25,20,11,42],[26,6,12,4],[26,20,12,18],[26,22,12,20],[27,4,13,2],[27,5,13,3],[28,4,14,2],[28,8,14,6,"withAuth"],[28,16,14,14],[28,18,14,16],[29,6,15,4],[29,12,15,10,"token"],[29,17,15,15],[29,20,15,18],[29,26,15,24],[29,30,15,24,"getToken"],[29,35,15,32],[29,36,15,32,"getToken"],[29,44,15,32],[29,46,15,33],[29,47,15,34],[30,6,16,4],[30,10,16,8,"token"],[30,15,16,13],[30,17,16,15],[31,8,17,6,"headers"],[31,15,17,13],[31,16,17,14],[31,31,17,29],[31,32,17,30],[31,35,17,33],[31,45,17,43,"token"],[31,50,17,48],[31,52,17,50],[32,6,18,4],[33,4,19,2],[34,4,20,2],[34,11,20,9,"headers"],[34,18,20,16],[35,2,21,0],[36,2,23,0],[36,17,23,15,"request"],[36,24,23,22,"request"],[36,25,23,26,"path"],[36,29,23,38],[36,31,23,40,"options"],[36,38,23,60],[36,41,23,63],[36,42,23,64],[36,43,23,65],[36,45,23,67,"withAuth"],[36,53,23,75],[36,56,23,78],[36,60,23,82],[36,62,23,96],[37,4,24,2],[37,10,24,8,"headers"],[37,17,24,15],[37,20,24,18],[37,26,24,24,"getHeaders"],[37,36,24,34],[37,37,24,35,"withAuth"],[37,45,24,43],[37,46,24,44],[38,4,25,2],[38,10,25,8,"response"],[38,18,25,16],[38,21,25,19],[38,27,25,25,"fetch"],[38,32,25,30],[38,33,25,31],[38,36,25,34,"BASE_URL"],[38,44,25,42],[38,51,25,49,"path"],[38,55,25,53],[38,57,25,55],[38,59,25,57],[39,6,26,4],[39,9,26,7,"options"],[39,16,26,14],[40,6,27,4,"headers"],[40,13,27,11],[40,15,27,13],[41,8,27,15],[41,11,27,18,"headers"],[41,18,27,25],[42,8,27,27],[42,12,27,31,"options"],[42,19,27,38],[42,20,27,39,"headers"],[42,27,27,46],[42,31,27,50],[42,32,27,51],[42,33,27,52],[43,6,27,54],[44,4,28,2],[44,5,28,3],[44,6,28,4],[45,4,29,2],[45,10,29,8,"data"],[45,14,29,12],[45,17,29,15],[45,23,29,21,"response"],[45,31,29,29],[45,32,29,30,"json"],[45,36,29,34],[45,37,29,35],[45,38,29,36],[46,4,30,2],[46,8,30,6],[46,9,30,7,"response"],[46,17,30,15],[46,18,30,16,"ok"],[46,20,30,18],[46,22,30,20],[47,6,31,4],[47,12,31,10],[47,16,31,14,"Error"],[47,21,31,19],[47,22,31,20,"data"],[47,26,31,24],[47,27,31,25,"detail"],[47,33,31,31],[47,37,31,35,"data"],[47,41,31,39],[47,42,31,40,"message"],[47,49,31,47],[47,53,31,51],[47,69,31,67],[47,70,31,68],[48,4,32,2],[49,4,33,2],[49,11,33,9,"data"],[49,15,33,13],[50,2,34,0],[51,2,36,7],[51,8,36,13,"api"],[51,11,36,16],[51,14,36,19],[52,4,37,2],[53,4,38,2,"register"],[53,12,38,10],[53,14,38,12,"register"],[53,15,38,13,"username"],[53,23,38,29],[53,25,38,31,"email"],[53,30,38,44],[53,32,38,46,"password"],[53,40,38,62],[53,45,39,4,"request"],[53,52,39,11],[53,53,39,12],[53,69,39,28],[53,71,39,30],[54,6,39,32,"method"],[54,12,39,38],[54,14,39,40],[54,20,39,46],[55,6,39,48,"body"],[55,10,39,52],[55,12,39,54,"JSON"],[55,16,39,58],[55,17,39,59,"stringify"],[55,26,39,68],[55,27,39,69],[56,8,39,71,"username"],[56,16,39,79],[57,8,39,81,"email"],[57,13,39,86],[58,8,39,88,"password"],[59,6,39,97],[59,7,39,98],[60,4,39,100],[60,5,39,101],[60,7,39,103],[60,12,39,108],[60,13,39,109],[61,4,41,2,"login"],[61,9,41,7],[61,11,41,9,"login"],[61,12,41,10,"email"],[61,17,41,23],[61,19,41,25,"password"],[61,27,41,41],[61,32,42,4,"request"],[61,39,42,11],[61,40,42,12],[61,53,42,25],[61,55,42,27],[62,6,42,29,"method"],[62,12,42,35],[62,14,42,37],[62,20,42,43],[63,6,42,45,"body"],[63,10,42,49],[63,12,42,51,"JSON"],[63,16,42,55],[63,17,42,56,"stringify"],[63,26,42,65],[63,27,42,66],[64,8,42,68,"email"],[64,13,42,73],[65,8,42,75,"password"],[66,6,42,84],[66,7,42,85],[67,4,42,87],[67,5,42,88],[67,7,42,90],[67,12,42,95],[67,13,42,96],[68,4,44,2,"getMe"],[68,9,44,7],[68,11,44,9,"getMe"],[68,12,44,9],[68,17,44,15,"request"],[68,24,44,22],[68,25,44,23],[68,35,44,33],[68,36,44,34],[69,4,46,2],[70,4,47,2,"startRun"],[70,12,47,10],[70,14,47,12,"startRun"],[70,15,47,12],[70,20,47,18,"request"],[70,27,47,25],[70,28,47,26],[70,41,47,39],[70,43,47,41],[71,6,47,43,"method"],[71,12,47,49],[71,14,47,51],[72,4,47,58],[72,5,47,59],[72,6,47,60],[73,4,49,2,"endRun"],[73,10,49,8],[73,12,49,10,"endRun"],[73,13,49,11,"runId"],[73,18,49,24],[73,20,49,26,"coordinates"],[73,31,49,49],[73,36,50,4,"request"],[73,43,50,11],[73,44,50,12],[73,55,50,23],[73,57,50,25],[74,6,50,27,"method"],[74,12,50,33],[74,14,50,35],[74,20,50,41],[75,6,50,43,"body"],[75,10,50,47],[75,12,50,49,"JSON"],[75,16,50,53],[75,17,50,54,"stringify"],[75,26,50,63],[75,27,50,64],[76,8,50,66,"runId"],[76,13,50,71],[77,8,50,73,"coordinates"],[78,6,50,85],[78,7,50,86],[79,4,50,88],[79,5,50,89],[79,6,50,90],[80,4,52,2,"getUserRuns"],[80,15,52,13],[80,17,52,16,"userId"],[80,23,52,30],[80,27,52,35,"request"],[80,34,52,42],[80,35,52,43],[80,44,52,52,"userId"],[80,50,52,58],[80,52,52,60],[80,53,52,61],[81,4,54,2,"getRunDetail"],[81,16,54,14],[81,18,54,17,"runId"],[81,23,54,30],[81,27,54,35,"request"],[81,34,54,42],[81,35,54,43],[81,51,54,59,"runId"],[81,56,54,64],[81,58,54,66],[81,59,54,67],[82,4,56,2],[83,4,57,2,"getTerritories"],[83,18,57,16],[83,20,57,18,"getTerritories"],[83,21,57,19,"minLng"],[83,27,57,33],[83,29,57,35,"minLat"],[83,35,57,49],[83,37,57,51,"maxLng"],[83,43,57,65],[83,45,57,67,"maxLat"],[83,51,57,81],[83,56,58,4,"request"],[83,63,58,11],[83,64,58,12],[83,87,58,35,"minLng"],[83,93,58,41],[83,104,58,52,"minLat"],[83,110,58,58],[83,121,58,69,"maxLng"],[83,127,58,75],[83,138,58,86,"maxLat"],[83,144,58,92],[83,146,58,94],[83,147,58,95],[84,4,60,2,"getUserTerritories"],[84,22,60,20],[84,24,60,23,"userId"],[84,30,60,37],[84,34,60,42,"request"],[84,41,60,49],[84,42,60,50],[84,63,60,71,"userId"],[84,69,60,77],[84,71,60,79],[84,72,60,80],[85,4,62,2],[86,4,63,2,"getGlobalLeaderboard"],[86,24,63,22],[86,26,63,24,"getGlobalLeaderboard"],[86,27,63,24],[86,32,63,30,"request"],[86,39,63,37],[86,40,63,38],[86,61,63,59],[86,62,63,60],[87,4,65,2],[88,4,66,2,"getUserProfile"],[88,18,66,16],[88,20,66,19,"userId"],[88,26,66,33],[88,30,66,38,"request"],[88,37,66,45],[88,38,66,46],[88,48,66,56,"userId"],[88,54,66,62],[88,64,66,72],[88,65,66,73],[89,4,68,2,"updateProfile"],[89,17,68,15],[89,19,68,17,"updateProfile"],[89,20,68,18,"userId"],[89,26,68,32],[89,28,68,34,"data"],[89,32,68,81],[89,37,69,4,"request"],[89,44,69,11],[89,45,69,12],[89,55,69,22,"userId"],[89,61,69,28],[89,71,69,38],[89,73,69,40],[90,6,69,42,"method"],[90,12,69,48],[90,14,69,50],[90,19,69,55],[91,6,69,57,"body"],[91,10,69,61],[91,12,69,63,"JSON"],[91,16,69,67],[91,17,69,68,"stringify"],[91,26,69,77],[91,27,69,78,"data"],[91,31,69,82],[92,4,69,84],[92,5,69,85],[93,2,70,0],[93,3,70,1],[94,0,70,2],[94,3]],"functionMap":{"names":["<global>","getHeaders","request","register","login","getMe","startRun","endRun","getUserRuns","getRunDetail","getTerritories","getUserTerritories","getGlobalLeaderboard","getUserProfile","updateProfile"],"mappings":"AAA;ACS;CDW;AEE;CFW;YGI;6GHC;SIE;gGJC;SKE,yBL;YMG,gDN;UOE;0FPC;eQE,8CR;gBSE,mDT;kBUG;+FVC;sBWE,0DX;wBYG,oCZ;kBaG,uDb;iBcE;sFdC"},"hasCjsExports":false},"type":"js/module"}]}