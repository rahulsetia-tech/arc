{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"./auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"bPsbxvG/upGRzIWg1D65yZCgVZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _auth = require(_dependencyMap[1], \"./auth\");\n  const BASE_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function getHeaders(withAuth = true) {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (withAuth) {\n      const token = await (0, _auth.getToken)();\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n    return headers;\n  }\n  async function request(path, options = {}, withAuth = true) {\n    const headers = await getHeaders(withAuth);\n    const response = await fetch(`${BASE_URL}/api${path}`, Object.assign({}, options, {\n      headers: Object.assign({}, headers, options.headers || {})\n    }));\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.detail || data.message || 'Request failed');\n    }\n    return data;\n  }\n  const api = {\n    // Auth\n    register: (username, email, password) => request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        email,\n        password\n      })\n    }, false),\n    login: (email, password) => request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }, false),\n    getMe: () => request('/auth/me'),\n    // Runs\n    startRun: () => request('/runs/start', {\n      method: 'POST'\n    }),\n    endRun: (runId, coordinates) => request('/runs/end', {\n      method: 'POST',\n      body: JSON.stringify({\n        runId,\n        coordinates\n      })\n    }),\n    getUserRuns: userId => request(`/runs/${userId}`),\n    getRunDetail: runId => request(`/runs/detail/${runId}`),\n    // Territories\n    getTerritories: (minLng, minLat, maxLng, maxLat) => request(`/territories?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`),\n    getUserTerritories: userId => request(`/territories/user/${userId}`),\n    // Leaderboard\n    getGlobalLeaderboard: () => request('/leaderboard/global'),\n    // Profile\n    getUserProfile: userId => request(`/users/${userId}/profile`),\n    updateProfile: (userId, data) => request(`/users/${userId}/profile`, {\n      method: 'PUT',\n      body: JSON.stringify(data)\n    })\n  };\n});","lineCount":82,"map":[[7,2,31,0,"Object"],[7,8,31,0],[7,9,31,0,"defineProperty"],[7,23,31,0],[7,24,31,0,"exports"],[7,31,31,0],[8,4,31,0,"enumerable"],[8,14,31,0],[9,4,31,0,"get"],[9,7,31,0],[9,18,31,0,"get"],[9,19,31,0],[10,6,31,0],[10,13,31,0,"api"],[10,16,31,0],[11,4,31,0],[12,2,31,0],[13,2,65,2],[13,6,65,2,"_expoVirtualEnv"],[13,21,65,2],[13,24,65,2,"require"],[13,31,65,2],[13,32,65,2,"_dependencyMap"],[13,46,65,2],[14,2,1,0],[14,6,1,0,"_auth"],[14,11,1,0],[14,14,1,0,"require"],[14,21,1,0],[14,22,1,0,"_dependencyMap"],[14,36,1,0],[15,2,3,0],[15,8,3,6,"BASE_URL"],[15,16,3,14],[15,19,3,17,"_expoVirtualEnv"],[15,34,3,17],[15,35,3,17,"env"],[15,38,3,17],[15,39,3,17,"EXPO_PUBLIC_BACKEND_URL"],[15,62,3,17],[15,66,3,56],[15,68,3,58],[16,2,5,0],[16,17,5,15,"getHeaders"],[16,27,5,25,"getHeaders"],[16,28,5,26,"withAuth"],[16,36,5,34],[16,39,5,37],[16,43,5,41],[16,45,5,76],[17,4,6,2],[17,10,6,8,"headers"],[17,17,6,39],[17,20,6,42],[18,6,7,4],[18,20,7,18],[18,22,7,20],[19,4,8,2],[19,5,8,3],[20,4,9,2],[20,8,9,6,"withAuth"],[20,16,9,14],[20,18,9,16],[21,6,10,4],[21,12,10,10,"token"],[21,17,10,15],[21,20,10,18],[21,26,10,24],[21,30,10,24,"getToken"],[21,35,10,32],[21,36,10,32,"getToken"],[21,44,10,32],[21,46,10,33],[21,47,10,34],[22,6,11,4],[22,10,11,8,"token"],[22,15,11,13],[22,17,11,15],[23,8,12,6,"headers"],[23,15,12,13],[23,16,12,14],[23,31,12,29],[23,32,12,30],[23,35,12,33],[23,45,12,43,"token"],[23,50,12,48],[23,52,12,50],[24,6,13,4],[25,4,14,2],[26,4,15,2],[26,11,15,9,"headers"],[26,18,15,16],[27,2,16,0],[28,2,18,0],[28,17,18,15,"request"],[28,24,18,22,"request"],[28,25,18,26,"path"],[28,29,18,38],[28,31,18,40,"options"],[28,38,18,60],[28,41,18,63],[28,42,18,64],[28,43,18,65],[28,45,18,67,"withAuth"],[28,53,18,75],[28,56,18,78],[28,60,18,82],[28,62,18,96],[29,4,19,2],[29,10,19,8,"headers"],[29,17,19,15],[29,20,19,18],[29,26,19,24,"getHeaders"],[29,36,19,34],[29,37,19,35,"withAuth"],[29,45,19,43],[29,46,19,44],[30,4,20,2],[30,10,20,8,"response"],[30,18,20,16],[30,21,20,19],[30,27,20,25,"fetch"],[30,32,20,30],[30,33,20,31],[30,36,20,34,"BASE_URL"],[30,44,20,42],[30,51,20,49,"path"],[30,55,20,53],[30,57,20,55],[30,59,20,55,"Object"],[30,65,20,55],[30,66,20,55,"assign"],[30,72,20,55],[30,77,21,7,"options"],[30,84,21,14],[31,6,22,4,"headers"],[31,13,22,11],[31,15,22,11,"Object"],[31,21,22,11],[31,22,22,11,"assign"],[31,28,22,11],[31,33,22,18,"headers"],[31,40,22,25],[31,42,22,31,"options"],[31,49,22,38],[31,50,22,39,"headers"],[31,57,22,46],[31,61,22,50],[31,62,22,51],[31,63,22,52],[32,4,22,55],[32,6,23,3],[32,7,23,4],[33,4,24,2],[33,10,24,8,"data"],[33,14,24,12],[33,17,24,15],[33,23,24,21,"response"],[33,31,24,29],[33,32,24,30,"json"],[33,36,24,34],[33,37,24,35],[33,38,24,36],[34,4,25,2],[34,8,25,6],[34,9,25,7,"response"],[34,17,25,15],[34,18,25,16,"ok"],[34,20,25,18],[34,22,25,20],[35,6,26,4],[35,12,26,10],[35,16,26,14,"Error"],[35,21,26,19],[35,22,26,20,"data"],[35,26,26,24],[35,27,26,25,"detail"],[35,33,26,31],[35,37,26,35,"data"],[35,41,26,39],[35,42,26,40,"message"],[35,49,26,47],[35,53,26,51],[35,69,26,67],[35,70,26,68],[36,4,27,2],[37,4,28,2],[37,11,28,9,"data"],[37,15,28,13],[38,2,29,0],[39,2,31,7],[39,8,31,13,"api"],[39,11,31,16],[39,14,31,19],[40,4,32,2],[41,4,33,2,"register"],[41,12,33,10],[41,14,33,12,"register"],[41,15,33,13,"username"],[41,23,33,29],[41,25,33,31,"email"],[41,30,33,44],[41,32,33,46,"password"],[41,40,33,62],[41,45,34,4,"request"],[41,52,34,11],[41,53,34,12],[41,69,34,28],[41,71,34,30],[42,6,34,32,"method"],[42,12,34,38],[42,14,34,40],[42,20,34,46],[43,6,34,48,"body"],[43,10,34,52],[43,12,34,54,"JSON"],[43,16,34,58],[43,17,34,59,"stringify"],[43,26,34,68],[43,27,34,69],[44,8,34,71,"username"],[44,16,34,79],[45,8,34,81,"email"],[45,13,34,86],[46,8,34,88,"password"],[47,6,34,97],[47,7,34,98],[48,4,34,100],[48,5,34,101],[48,7,34,103],[48,12,34,108],[48,13,34,109],[49,4,36,2,"login"],[49,9,36,7],[49,11,36,9,"login"],[49,12,36,10,"email"],[49,17,36,23],[49,19,36,25,"password"],[49,27,36,41],[49,32,37,4,"request"],[49,39,37,11],[49,40,37,12],[49,53,37,25],[49,55,37,27],[50,6,37,29,"method"],[50,12,37,35],[50,14,37,37],[50,20,37,43],[51,6,37,45,"body"],[51,10,37,49],[51,12,37,51,"JSON"],[51,16,37,55],[51,17,37,56,"stringify"],[51,26,37,65],[51,27,37,66],[52,8,37,68,"email"],[52,13,37,73],[53,8,37,75,"password"],[54,6,37,84],[54,7,37,85],[55,4,37,87],[55,5,37,88],[55,7,37,90],[55,12,37,95],[55,13,37,96],[56,4,39,2,"getMe"],[56,9,39,7],[56,11,39,9,"getMe"],[56,12,39,9],[56,17,39,15,"request"],[56,24,39,22],[56,25,39,23],[56,35,39,33],[56,36,39,34],[57,4,41,2],[58,4,42,2,"startRun"],[58,12,42,10],[58,14,42,12,"startRun"],[58,15,42,12],[58,20,42,18,"request"],[58,27,42,25],[58,28,42,26],[58,41,42,39],[58,43,42,41],[59,6,42,43,"method"],[59,12,42,49],[59,14,42,51],[60,4,42,58],[60,5,42,59],[60,6,42,60],[61,4,44,2,"endRun"],[61,10,44,8],[61,12,44,10,"endRun"],[61,13,44,11,"runId"],[61,18,44,24],[61,20,44,26,"coordinates"],[61,31,44,49],[61,36,45,4,"request"],[61,43,45,11],[61,44,45,12],[61,55,45,23],[61,57,45,25],[62,6,45,27,"method"],[62,12,45,33],[62,14,45,35],[62,20,45,41],[63,6,45,43,"body"],[63,10,45,47],[63,12,45,49,"JSON"],[63,16,45,53],[63,17,45,54,"stringify"],[63,26,45,63],[63,27,45,64],[64,8,45,66,"runId"],[64,13,45,71],[65,8,45,73,"coordinates"],[66,6,45,85],[66,7,45,86],[67,4,45,88],[67,5,45,89],[67,6,45,90],[68,4,47,2,"getUserRuns"],[68,15,47,13],[68,17,47,16,"userId"],[68,23,47,30],[68,27,47,35,"request"],[68,34,47,42],[68,35,47,43],[68,44,47,52,"userId"],[68,50,47,58],[68,52,47,60],[68,53,47,61],[69,4,49,2,"getRunDetail"],[69,16,49,14],[69,18,49,17,"runId"],[69,23,49,30],[69,27,49,35,"request"],[69,34,49,42],[69,35,49,43],[69,51,49,59,"runId"],[69,56,49,64],[69,58,49,66],[69,59,49,67],[70,4,51,2],[71,4,52,2,"getTerritories"],[71,18,52,16],[71,20,52,18,"getTerritories"],[71,21,52,19,"minLng"],[71,27,52,33],[71,29,52,35,"minLat"],[71,35,52,49],[71,37,52,51,"maxLng"],[71,43,52,65],[71,45,52,67,"maxLat"],[71,51,52,81],[71,56,53,4,"request"],[71,63,53,11],[71,64,53,12],[71,87,53,35,"minLng"],[71,93,53,41],[71,104,53,52,"minLat"],[71,110,53,58],[71,121,53,69,"maxLng"],[71,127,53,75],[71,138,53,86,"maxLat"],[71,144,53,92],[71,146,53,94],[71,147,53,95],[72,4,55,2,"getUserTerritories"],[72,22,55,20],[72,24,55,23,"userId"],[72,30,55,37],[72,34,55,42,"request"],[72,41,55,49],[72,42,55,50],[72,63,55,71,"userId"],[72,69,55,77],[72,71,55,79],[72,72,55,80],[73,4,57,2],[74,4,58,2,"getGlobalLeaderboard"],[74,24,58,22],[74,26,58,24,"getGlobalLeaderboard"],[74,27,58,24],[74,32,58,30,"request"],[74,39,58,37],[74,40,58,38],[74,61,58,59],[74,62,58,60],[75,4,60,2],[76,4,61,2,"getUserProfile"],[76,18,61,16],[76,20,61,19,"userId"],[76,26,61,33],[76,30,61,38,"request"],[76,37,61,45],[76,38,61,46],[76,48,61,56,"userId"],[76,54,61,62],[76,64,61,72],[76,65,61,73],[77,4,63,2,"updateProfile"],[77,17,63,15],[77,19,63,17,"updateProfile"],[77,20,63,18,"userId"],[77,26,63,32],[77,28,63,34,"data"],[77,32,63,81],[77,37,64,4,"request"],[77,44,64,11],[77,45,64,12],[77,55,64,22,"userId"],[77,61,64,28],[77,71,64,38],[77,73,64,40],[78,6,64,42,"method"],[78,12,64,48],[78,14,64,50],[78,19,64,55],[79,6,64,57,"body"],[79,10,64,61],[79,12,64,63,"JSON"],[79,16,64,67],[79,17,64,68,"stringify"],[79,26,64,77],[79,27,64,78,"data"],[79,31,64,82],[80,4,64,84],[80,5,64,85],[81,2,65,0],[81,3,65,1],[82,0,65,2],[82,3]],"functionMap":{"names":["<global>","getHeaders","request","register","login","getMe","startRun","endRun","getUserRuns","getRunDetail","getTerritories","getUserTerritories","getGlobalLeaderboard","getUserProfile","updateProfile"],"mappings":"AAA;ACI;CDW;AEE;CFW;YGI;6GHC;SIE;gGJC;SKE,yBL;YMG,gDN;UOE;0FPC;eQE,8CR;gBSE,mDT;kBUG;+FVC;sBWE,0DX;wBYG,oCZ;kBaG,uDb;iBcE;sFdC"},"hasCjsExports":false},"type":"js/module"}]}