{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"./auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"bPsbxvG/upGRzIWg1D65yZCgVZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _auth = require(_dependencyMap[1], \"./auth\");\n  // Use full backend URL for API calls on all platforms\n  const BASE_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function getHeaders(withAuth = true) {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (withAuth) {\n      const token = await (0, _auth.getToken)();\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n    return headers;\n  }\n  async function request(path, options = {}, withAuth = true) {\n    const headers = await getHeaders(withAuth);\n    const response = await fetch(`${BASE_URL}/api${path}`, Object.assign({}, options, {\n      headers: Object.assign({}, headers, options.headers || {})\n    }));\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.detail || data.message || 'Request failed');\n    }\n    return data;\n  }\n  const api = {\n    // Auth\n    register: (username, email, password) => request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        email,\n        password\n      })\n    }, false),\n    login: (email, password) => request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }, false),\n    getMe: () => request('/auth/me'),\n    // Runs\n    startRun: () => request('/runs/start', {\n      method: 'POST'\n    }),\n    endRun: (runId, coordinates) => request('/runs/end', {\n      method: 'POST',\n      body: JSON.stringify({\n        runId,\n        coordinates\n      })\n    }),\n    getUserRuns: userId => request(`/runs/${userId}`),\n    getRunDetail: runId => request(`/runs/detail/${runId}`),\n    // Territories\n    getTerritories: (minLng, minLat, maxLng, maxLat) => request(`/territories?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`),\n    getUserTerritories: userId => request(`/territories/user/${userId}`),\n    // Leaderboard\n    getGlobalLeaderboard: () => request('/leaderboard/global'),\n    // FIX 4: Local leaderboard\n    getLocalLeaderboard: (lat, lng, radiusKm = 20) => request(`/leaderboard/local?lat=${lat}&lng=${lng}&radius_km=${radiusKm}`),\n    // Profile\n    getUserProfile: userId => request(`/users/${userId}/profile`),\n    updateProfile: (userId, data) => request(`/users/${userId}/profile`, {\n      method: 'PUT',\n      body: JSON.stringify(data)\n    })\n  };\n});","lineCount":85,"map":[[7,2,32,0,"Object"],[7,8,32,0],[7,9,32,0,"defineProperty"],[7,23,32,0],[7,24,32,0,"exports"],[7,31,32,0],[8,4,32,0,"enumerable"],[8,14,32,0],[9,4,32,0,"get"],[9,7,32,0],[9,18,32,0,"get"],[9,19,32,0],[10,6,32,0],[10,13,32,0,"api"],[10,16,32,0],[11,4,32,0],[12,2,32,0],[13,2,70,2],[13,6,70,2,"_expoVirtualEnv"],[13,21,70,2],[13,24,70,2,"require"],[13,31,70,2],[13,32,70,2,"_dependencyMap"],[13,46,70,2],[14,2,1,0],[14,6,1,0,"_auth"],[14,11,1,0],[14,14,1,0,"require"],[14,21,1,0],[14,22,1,0,"_dependencyMap"],[14,36,1,0],[15,2,3,0],[16,2,4,0],[16,8,4,6,"BASE_URL"],[16,16,4,14],[16,19,4,17,"_expoVirtualEnv"],[16,34,4,17],[16,35,4,17,"env"],[16,38,4,17],[16,39,4,17,"EXPO_PUBLIC_BACKEND_URL"],[16,62,4,17],[16,66,4,56],[16,68,4,58],[17,2,6,0],[17,17,6,15,"getHeaders"],[17,27,6,25,"getHeaders"],[17,28,6,26,"withAuth"],[17,36,6,34],[17,39,6,37],[17,43,6,41],[17,45,6,76],[18,4,7,2],[18,10,7,8,"headers"],[18,17,7,39],[18,20,7,42],[19,6,8,4],[19,20,8,18],[19,22,8,20],[20,4,9,2],[20,5,9,3],[21,4,10,2],[21,8,10,6,"withAuth"],[21,16,10,14],[21,18,10,16],[22,6,11,4],[22,12,11,10,"token"],[22,17,11,15],[22,20,11,18],[22,26,11,24],[22,30,11,24,"getToken"],[22,35,11,32],[22,36,11,32,"getToken"],[22,44,11,32],[22,46,11,33],[22,47,11,34],[23,6,12,4],[23,10,12,8,"token"],[23,15,12,13],[23,17,12,15],[24,8,13,6,"headers"],[24,15,13,13],[24,16,13,14],[24,31,13,29],[24,32,13,30],[24,35,13,33],[24,45,13,43,"token"],[24,50,13,48],[24,52,13,50],[25,6,14,4],[26,4,15,2],[27,4,16,2],[27,11,16,9,"headers"],[27,18,16,16],[28,2,17,0],[29,2,19,0],[29,17,19,15,"request"],[29,24,19,22,"request"],[29,25,19,26,"path"],[29,29,19,38],[29,31,19,40,"options"],[29,38,19,60],[29,41,19,63],[29,42,19,64],[29,43,19,65],[29,45,19,67,"withAuth"],[29,53,19,75],[29,56,19,78],[29,60,19,82],[29,62,19,96],[30,4,20,2],[30,10,20,8,"headers"],[30,17,20,15],[30,20,20,18],[30,26,20,24,"getHeaders"],[30,36,20,34],[30,37,20,35,"withAuth"],[30,45,20,43],[30,46,20,44],[31,4,21,2],[31,10,21,8,"response"],[31,18,21,16],[31,21,21,19],[31,27,21,25,"fetch"],[31,32,21,30],[31,33,21,31],[31,36,21,34,"BASE_URL"],[31,44,21,42],[31,51,21,49,"path"],[31,55,21,53],[31,57,21,55],[31,59,21,55,"Object"],[31,65,21,55],[31,66,21,55,"assign"],[31,72,21,55],[31,77,22,7,"options"],[31,84,22,14],[32,6,23,4,"headers"],[32,13,23,11],[32,15,23,11,"Object"],[32,21,23,11],[32,22,23,11,"assign"],[32,28,23,11],[32,33,23,18,"headers"],[32,40,23,25],[32,42,23,31,"options"],[32,49,23,38],[32,50,23,39,"headers"],[32,57,23,46],[32,61,23,50],[32,62,23,51],[32,63,23,52],[33,4,23,55],[33,6,24,3],[33,7,24,4],[34,4,25,2],[34,10,25,8,"data"],[34,14,25,12],[34,17,25,15],[34,23,25,21,"response"],[34,31,25,29],[34,32,25,30,"json"],[34,36,25,34],[34,37,25,35],[34,38,25,36],[35,4,26,2],[35,8,26,6],[35,9,26,7,"response"],[35,17,26,15],[35,18,26,16,"ok"],[35,20,26,18],[35,22,26,20],[36,6,27,4],[36,12,27,10],[36,16,27,14,"Error"],[36,21,27,19],[36,22,27,20,"data"],[36,26,27,24],[36,27,27,25,"detail"],[36,33,27,31],[36,37,27,35,"data"],[36,41,27,39],[36,42,27,40,"message"],[36,49,27,47],[36,53,27,51],[36,69,27,67],[36,70,27,68],[37,4,28,2],[38,4,29,2],[38,11,29,9,"data"],[38,15,29,13],[39,2,30,0],[40,2,32,7],[40,8,32,13,"api"],[40,11,32,16],[40,14,32,19],[41,4,33,2],[42,4,34,2,"register"],[42,12,34,10],[42,14,34,12,"register"],[42,15,34,13,"username"],[42,23,34,29],[42,25,34,31,"email"],[42,30,34,44],[42,32,34,46,"password"],[42,40,34,62],[42,45,35,4,"request"],[42,52,35,11],[42,53,35,12],[42,69,35,28],[42,71,35,30],[43,6,35,32,"method"],[43,12,35,38],[43,14,35,40],[43,20,35,46],[44,6,35,48,"body"],[44,10,35,52],[44,12,35,54,"JSON"],[44,16,35,58],[44,17,35,59,"stringify"],[44,26,35,68],[44,27,35,69],[45,8,35,71,"username"],[45,16,35,79],[46,8,35,81,"email"],[46,13,35,86],[47,8,35,88,"password"],[48,6,35,97],[48,7,35,98],[49,4,35,100],[49,5,35,101],[49,7,35,103],[49,12,35,108],[49,13,35,109],[50,4,37,2,"login"],[50,9,37,7],[50,11,37,9,"login"],[50,12,37,10,"email"],[50,17,37,23],[50,19,37,25,"password"],[50,27,37,41],[50,32,38,4,"request"],[50,39,38,11],[50,40,38,12],[50,53,38,25],[50,55,38,27],[51,6,38,29,"method"],[51,12,38,35],[51,14,38,37],[51,20,38,43],[52,6,38,45,"body"],[52,10,38,49],[52,12,38,51,"JSON"],[52,16,38,55],[52,17,38,56,"stringify"],[52,26,38,65],[52,27,38,66],[53,8,38,68,"email"],[53,13,38,73],[54,8,38,75,"password"],[55,6,38,84],[55,7,38,85],[56,4,38,87],[56,5,38,88],[56,7,38,90],[56,12,38,95],[56,13,38,96],[57,4,40,2,"getMe"],[57,9,40,7],[57,11,40,9,"getMe"],[57,12,40,9],[57,17,40,15,"request"],[57,24,40,22],[57,25,40,23],[57,35,40,33],[57,36,40,34],[58,4,42,2],[59,4,43,2,"startRun"],[59,12,43,10],[59,14,43,12,"startRun"],[59,15,43,12],[59,20,43,18,"request"],[59,27,43,25],[59,28,43,26],[59,41,43,39],[59,43,43,41],[60,6,43,43,"method"],[60,12,43,49],[60,14,43,51],[61,4,43,58],[61,5,43,59],[61,6,43,60],[62,4,45,2,"endRun"],[62,10,45,8],[62,12,45,10,"endRun"],[62,13,45,11,"runId"],[62,18,45,24],[62,20,45,26,"coordinates"],[62,31,45,49],[62,36,46,4,"request"],[62,43,46,11],[62,44,46,12],[62,55,46,23],[62,57,46,25],[63,6,46,27,"method"],[63,12,46,33],[63,14,46,35],[63,20,46,41],[64,6,46,43,"body"],[64,10,46,47],[64,12,46,49,"JSON"],[64,16,46,53],[64,17,46,54,"stringify"],[64,26,46,63],[64,27,46,64],[65,8,46,66,"runId"],[65,13,46,71],[66,8,46,73,"coordinates"],[67,6,46,85],[67,7,46,86],[68,4,46,88],[68,5,46,89],[68,6,46,90],[69,4,48,2,"getUserRuns"],[69,15,48,13],[69,17,48,16,"userId"],[69,23,48,30],[69,27,48,35,"request"],[69,34,48,42],[69,35,48,43],[69,44,48,52,"userId"],[69,50,48,58],[69,52,48,60],[69,53,48,61],[70,4,50,2,"getRunDetail"],[70,16,50,14],[70,18,50,17,"runId"],[70,23,50,30],[70,27,50,35,"request"],[70,34,50,42],[70,35,50,43],[70,51,50,59,"runId"],[70,56,50,64],[70,58,50,66],[70,59,50,67],[71,4,52,2],[72,4,53,2,"getTerritories"],[72,18,53,16],[72,20,53,18,"getTerritories"],[72,21,53,19,"minLng"],[72,27,53,33],[72,29,53,35,"minLat"],[72,35,53,49],[72,37,53,51,"maxLng"],[72,43,53,65],[72,45,53,67,"maxLat"],[72,51,53,81],[72,56,54,4,"request"],[72,63,54,11],[72,64,54,12],[72,87,54,35,"minLng"],[72,93,54,41],[72,104,54,52,"minLat"],[72,110,54,58],[72,121,54,69,"maxLng"],[72,127,54,75],[72,138,54,86,"maxLat"],[72,144,54,92],[72,146,54,94],[72,147,54,95],[73,4,56,2,"getUserTerritories"],[73,22,56,20],[73,24,56,23,"userId"],[73,30,56,37],[73,34,56,42,"request"],[73,41,56,49],[73,42,56,50],[73,63,56,71,"userId"],[73,69,56,77],[73,71,56,79],[73,72,56,80],[74,4,58,2],[75,4,59,2,"getGlobalLeaderboard"],[75,24,59,22],[75,26,59,24,"getGlobalLeaderboard"],[75,27,59,24],[75,32,59,30,"request"],[75,39,59,37],[75,40,59,38],[75,61,59,59],[75,62,59,60],[76,4,61,2],[77,4,62,2,"getLocalLeaderboard"],[77,23,62,21],[77,25,62,23,"getLocalLeaderboard"],[77,26,62,24,"lat"],[77,29,62,35],[77,31,62,37,"lng"],[77,34,62,48],[77,36,62,50,"radiusKm"],[77,44,62,66],[77,47,62,69],[77,49,62,71],[77,54,63,4,"request"],[77,61,63,11],[77,62,63,12],[77,88,63,38,"lat"],[77,91,63,41],[77,99,63,49,"lng"],[77,102,63,52],[77,116,63,66,"radiusKm"],[77,124,63,74],[77,126,63,76],[77,127,63,77],[78,4,65,2],[79,4,66,2,"getUserProfile"],[79,18,66,16],[79,20,66,19,"userId"],[79,26,66,33],[79,30,66,38,"request"],[79,37,66,45],[79,38,66,46],[79,48,66,56,"userId"],[79,54,66,62],[79,64,66,72],[79,65,66,73],[80,4,68,2,"updateProfile"],[80,17,68,15],[80,19,68,17,"updateProfile"],[80,20,68,18,"userId"],[80,26,68,32],[80,28,68,34,"data"],[80,32,68,81],[80,37,69,4,"request"],[80,44,69,11],[80,45,69,12],[80,55,69,22,"userId"],[80,61,69,28],[80,71,69,38],[80,73,69,40],[81,6,69,42,"method"],[81,12,69,48],[81,14,69,50],[81,19,69,55],[82,6,69,57,"body"],[82,10,69,61],[82,12,69,63,"JSON"],[82,16,69,67],[82,17,69,68,"stringify"],[82,26,69,77],[82,27,69,78,"data"],[82,31,69,82],[83,4,69,84],[83,5,69,85],[84,2,70,0],[84,3,70,1],[85,0,70,2],[85,3]],"functionMap":{"names":["<global>","getHeaders","request","register","login","getMe","startRun","endRun","getUserRuns","getRunDetail","getTerritories","getUserTerritories","getGlobalLeaderboard","getLocalLeaderboard","getUserProfile","updateProfile"],"mappings":"AAA;ACK;CDW;AEE;CFW;YGI;6GHC;SIE;gGJC;SKE,yBL;YMG,gDN;UOE;0FPC;eQE,8CR;gBSE,mDT;kBUG;+FVC;sBWE,0DX;wBYG,oCZ;uBaG;6EbC;kBcG,uDd;iBeE;sFfC"},"hasCjsExports":false},"type":"js/module"}]}