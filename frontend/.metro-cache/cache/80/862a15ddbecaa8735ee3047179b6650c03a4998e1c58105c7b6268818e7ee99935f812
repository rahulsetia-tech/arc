{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"./auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"bPsbxvG/upGRzIWg1D65yZCgVZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _auth = require(_dependencyMap[1], \"./auth\");\n  // Use full backend URL for API calls on all platforms\n  // EXPO_PUBLIC_BACKEND_URL = https://acres-live.preview.emergentagent.com\n  // On native: uses the same URL\n  // On web: cross-origin request to the backend (CORS is allowed for all origins)\n  const BASE_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function getHeaders(withAuth = true) {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (withAuth) {\n      const token = await (0, _auth.getToken)();\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n    return headers;\n  }\n  async function request(path, options = {}, withAuth = true) {\n    const headers = await getHeaders(withAuth);\n    const response = await fetch(`${BASE_URL}/api${path}`, Object.assign({}, options, {\n      headers: Object.assign({}, headers, options.headers || {})\n    }));\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.detail || data.message || 'Request failed');\n    }\n    return data;\n  }\n  const api = {\n    // Auth\n    register: (username, email, password) => request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        email,\n        password\n      })\n    }, false),\n    login: (email, password) => request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }, false),\n    getMe: () => request('/auth/me'),\n    // Runs\n    startRun: () => request('/runs/start', {\n      method: 'POST'\n    }),\n    endRun: (runId, coordinates) => request('/runs/end', {\n      method: 'POST',\n      body: JSON.stringify({\n        runId,\n        coordinates\n      })\n    }),\n    getUserRuns: userId => request(`/runs/${userId}`),\n    getRunDetail: runId => request(`/runs/detail/${runId}`),\n    // Territories\n    getTerritories: (minLng, minLat, maxLng, maxLat) => request(`/territories?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`),\n    getUserTerritories: userId => request(`/territories/user/${userId}`),\n    // Leaderboard\n    getGlobalLeaderboard: () => request('/leaderboard/global'),\n    // Profile\n    getUserProfile: userId => request(`/users/${userId}/profile`),\n    updateProfile: (userId, data) => request(`/users/${userId}/profile`, {\n      method: 'PUT',\n      body: JSON.stringify(data)\n    })\n  };\n});","lineCount":86,"map":[[7,2,36,0,"Object"],[7,8,36,0],[7,9,36,0,"defineProperty"],[7,23,36,0],[7,24,36,0,"exports"],[7,31,36,0],[8,4,36,0,"enumerable"],[8,14,36,0],[9,4,36,0,"get"],[9,7,36,0],[9,18,36,0,"get"],[9,19,36,0],[10,6,36,0],[10,13,36,0,"api"],[10,16,36,0],[11,4,36,0],[12,2,36,0],[13,2,70,2],[13,6,70,2,"_expoVirtualEnv"],[13,21,70,2],[13,24,70,2,"require"],[13,31,70,2],[13,32,70,2,"_dependencyMap"],[13,46,70,2],[14,2,1,0],[14,6,1,0,"_auth"],[14,11,1,0],[14,14,1,0,"require"],[14,21,1,0],[14,22,1,0,"_dependencyMap"],[14,36,1,0],[15,2,4,0],[16,2,5,0],[17,2,6,0],[18,2,7,0],[19,2,8,0],[19,8,8,6,"BASE_URL"],[19,16,8,14],[19,19,8,17,"_expoVirtualEnv"],[19,34,8,17],[19,35,8,17,"env"],[19,38,8,17],[19,39,8,17,"EXPO_PUBLIC_BACKEND_URL"],[19,62,8,17],[19,66,8,56],[19,68,8,58],[20,2,10,0],[20,17,10,15,"getHeaders"],[20,27,10,25,"getHeaders"],[20,28,10,26,"withAuth"],[20,36,10,34],[20,39,10,37],[20,43,10,41],[20,45,10,76],[21,4,11,2],[21,10,11,8,"headers"],[21,17,11,39],[21,20,11,42],[22,6,12,4],[22,20,12,18],[22,22,12,20],[23,4,13,2],[23,5,13,3],[24,4,14,2],[24,8,14,6,"withAuth"],[24,16,14,14],[24,18,14,16],[25,6,15,4],[25,12,15,10,"token"],[25,17,15,15],[25,20,15,18],[25,26,15,24],[25,30,15,24,"getToken"],[25,35,15,32],[25,36,15,32,"getToken"],[25,44,15,32],[25,46,15,33],[25,47,15,34],[26,6,16,4],[26,10,16,8,"token"],[26,15,16,13],[26,17,16,15],[27,8,17,6,"headers"],[27,15,17,13],[27,16,17,14],[27,31,17,29],[27,32,17,30],[27,35,17,33],[27,45,17,43,"token"],[27,50,17,48],[27,52,17,50],[28,6,18,4],[29,4,19,2],[30,4,20,2],[30,11,20,9,"headers"],[30,18,20,16],[31,2,21,0],[32,2,23,0],[32,17,23,15,"request"],[32,24,23,22,"request"],[32,25,23,26,"path"],[32,29,23,38],[32,31,23,40,"options"],[32,38,23,60],[32,41,23,63],[32,42,23,64],[32,43,23,65],[32,45,23,67,"withAuth"],[32,53,23,75],[32,56,23,78],[32,60,23,82],[32,62,23,96],[33,4,24,2],[33,10,24,8,"headers"],[33,17,24,15],[33,20,24,18],[33,26,24,24,"getHeaders"],[33,36,24,34],[33,37,24,35,"withAuth"],[33,45,24,43],[33,46,24,44],[34,4,25,2],[34,10,25,8,"response"],[34,18,25,16],[34,21,25,19],[34,27,25,25,"fetch"],[34,32,25,30],[34,33,25,31],[34,36,25,34,"BASE_URL"],[34,44,25,42],[34,51,25,49,"path"],[34,55,25,53],[34,57,25,55],[34,59,25,55,"Object"],[34,65,25,55],[34,66,25,55,"assign"],[34,72,25,55],[34,77,26,7,"options"],[34,84,26,14],[35,6,27,4,"headers"],[35,13,27,11],[35,15,27,11,"Object"],[35,21,27,11],[35,22,27,11,"assign"],[35,28,27,11],[35,33,27,18,"headers"],[35,40,27,25],[35,42,27,31,"options"],[35,49,27,38],[35,50,27,39,"headers"],[35,57,27,46],[35,61,27,50],[35,62,27,51],[35,63,27,52],[36,4,27,55],[36,6,28,3],[36,7,28,4],[37,4,29,2],[37,10,29,8,"data"],[37,14,29,12],[37,17,29,15],[37,23,29,21,"response"],[37,31,29,29],[37,32,29,30,"json"],[37,36,29,34],[37,37,29,35],[37,38,29,36],[38,4,30,2],[38,8,30,6],[38,9,30,7,"response"],[38,17,30,15],[38,18,30,16,"ok"],[38,20,30,18],[38,22,30,20],[39,6,31,4],[39,12,31,10],[39,16,31,14,"Error"],[39,21,31,19],[39,22,31,20,"data"],[39,26,31,24],[39,27,31,25,"detail"],[39,33,31,31],[39,37,31,35,"data"],[39,41,31,39],[39,42,31,40,"message"],[39,49,31,47],[39,53,31,51],[39,69,31,67],[39,70,31,68],[40,4,32,2],[41,4,33,2],[41,11,33,9,"data"],[41,15,33,13],[42,2,34,0],[43,2,36,7],[43,8,36,13,"api"],[43,11,36,16],[43,14,36,19],[44,4,37,2],[45,4,38,2,"register"],[45,12,38,10],[45,14,38,12,"register"],[45,15,38,13,"username"],[45,23,38,29],[45,25,38,31,"email"],[45,30,38,44],[45,32,38,46,"password"],[45,40,38,62],[45,45,39,4,"request"],[45,52,39,11],[45,53,39,12],[45,69,39,28],[45,71,39,30],[46,6,39,32,"method"],[46,12,39,38],[46,14,39,40],[46,20,39,46],[47,6,39,48,"body"],[47,10,39,52],[47,12,39,54,"JSON"],[47,16,39,58],[47,17,39,59,"stringify"],[47,26,39,68],[47,27,39,69],[48,8,39,71,"username"],[48,16,39,79],[49,8,39,81,"email"],[49,13,39,86],[50,8,39,88,"password"],[51,6,39,97],[51,7,39,98],[52,4,39,100],[52,5,39,101],[52,7,39,103],[52,12,39,108],[52,13,39,109],[53,4,41,2,"login"],[53,9,41,7],[53,11,41,9,"login"],[53,12,41,10,"email"],[53,17,41,23],[53,19,41,25,"password"],[53,27,41,41],[53,32,42,4,"request"],[53,39,42,11],[53,40,42,12],[53,53,42,25],[53,55,42,27],[54,6,42,29,"method"],[54,12,42,35],[54,14,42,37],[54,20,42,43],[55,6,42,45,"body"],[55,10,42,49],[55,12,42,51,"JSON"],[55,16,42,55],[55,17,42,56,"stringify"],[55,26,42,65],[55,27,42,66],[56,8,42,68,"email"],[56,13,42,73],[57,8,42,75,"password"],[58,6,42,84],[58,7,42,85],[59,4,42,87],[59,5,42,88],[59,7,42,90],[59,12,42,95],[59,13,42,96],[60,4,44,2,"getMe"],[60,9,44,7],[60,11,44,9,"getMe"],[60,12,44,9],[60,17,44,15,"request"],[60,24,44,22],[60,25,44,23],[60,35,44,33],[60,36,44,34],[61,4,46,2],[62,4,47,2,"startRun"],[62,12,47,10],[62,14,47,12,"startRun"],[62,15,47,12],[62,20,47,18,"request"],[62,27,47,25],[62,28,47,26],[62,41,47,39],[62,43,47,41],[63,6,47,43,"method"],[63,12,47,49],[63,14,47,51],[64,4,47,58],[64,5,47,59],[64,6,47,60],[65,4,49,2,"endRun"],[65,10,49,8],[65,12,49,10,"endRun"],[65,13,49,11,"runId"],[65,18,49,24],[65,20,49,26,"coordinates"],[65,31,49,49],[65,36,50,4,"request"],[65,43,50,11],[65,44,50,12],[65,55,50,23],[65,57,50,25],[66,6,50,27,"method"],[66,12,50,33],[66,14,50,35],[66,20,50,41],[67,6,50,43,"body"],[67,10,50,47],[67,12,50,49,"JSON"],[67,16,50,53],[67,17,50,54,"stringify"],[67,26,50,63],[67,27,50,64],[68,8,50,66,"runId"],[68,13,50,71],[69,8,50,73,"coordinates"],[70,6,50,85],[70,7,50,86],[71,4,50,88],[71,5,50,89],[71,6,50,90],[72,4,52,2,"getUserRuns"],[72,15,52,13],[72,17,52,16,"userId"],[72,23,52,30],[72,27,52,35,"request"],[72,34,52,42],[72,35,52,43],[72,44,52,52,"userId"],[72,50,52,58],[72,52,52,60],[72,53,52,61],[73,4,54,2,"getRunDetail"],[73,16,54,14],[73,18,54,17,"runId"],[73,23,54,30],[73,27,54,35,"request"],[73,34,54,42],[73,35,54,43],[73,51,54,59,"runId"],[73,56,54,64],[73,58,54,66],[73,59,54,67],[74,4,56,2],[75,4,57,2,"getTerritories"],[75,18,57,16],[75,20,57,18,"getTerritories"],[75,21,57,19,"minLng"],[75,27,57,33],[75,29,57,35,"minLat"],[75,35,57,49],[75,37,57,51,"maxLng"],[75,43,57,65],[75,45,57,67,"maxLat"],[75,51,57,81],[75,56,58,4,"request"],[75,63,58,11],[75,64,58,12],[75,87,58,35,"minLng"],[75,93,58,41],[75,104,58,52,"minLat"],[75,110,58,58],[75,121,58,69,"maxLng"],[75,127,58,75],[75,138,58,86,"maxLat"],[75,144,58,92],[75,146,58,94],[75,147,58,95],[76,4,60,2,"getUserTerritories"],[76,22,60,20],[76,24,60,23,"userId"],[76,30,60,37],[76,34,60,42,"request"],[76,41,60,49],[76,42,60,50],[76,63,60,71,"userId"],[76,69,60,77],[76,71,60,79],[76,72,60,80],[77,4,62,2],[78,4,63,2,"getGlobalLeaderboard"],[78,24,63,22],[78,26,63,24,"getGlobalLeaderboard"],[78,27,63,24],[78,32,63,30,"request"],[78,39,63,37],[78,40,63,38],[78,61,63,59],[78,62,63,60],[79,4,65,2],[80,4,66,2,"getUserProfile"],[80,18,66,16],[80,20,66,19,"userId"],[80,26,66,33],[80,30,66,38,"request"],[80,37,66,45],[80,38,66,46],[80,48,66,56,"userId"],[80,54,66,62],[80,64,66,72],[80,65,66,73],[81,4,68,2,"updateProfile"],[81,17,68,15],[81,19,68,17,"updateProfile"],[81,20,68,18,"userId"],[81,26,68,32],[81,28,68,34,"data"],[81,32,68,81],[81,37,69,4,"request"],[81,44,69,11],[81,45,69,12],[81,55,69,22,"userId"],[81,61,69,28],[81,71,69,38],[81,73,69,40],[82,6,69,42,"method"],[82,12,69,48],[82,14,69,50],[82,19,69,55],[83,6,69,57,"body"],[83,10,69,61],[83,12,69,63,"JSON"],[83,16,69,67],[83,17,69,68,"stringify"],[83,26,69,77],[83,27,69,78,"data"],[83,31,69,82],[84,4,69,84],[84,5,69,85],[85,2,70,0],[85,3,70,1],[86,0,70,2],[86,3]],"functionMap":{"names":["<global>","getHeaders","request","register","login","getMe","startRun","endRun","getUserRuns","getRunDetail","getTerritories","getUserTerritories","getGlobalLeaderboard","getUserProfile","updateProfile"],"mappings":"AAA;ACS;CDW;AEE;CFW;YGI;6GHC;SIE;gGJC;SKE,yBL;YMG,gDN;UOE;0FPC;eQE,8CR;gBSE,mDT;kBUG;+FVC;sBWE,0DX;wBYG,oCZ;kBaG,uDb;iBcE;sFdC"},"hasCjsExports":false},"type":"js/module"}]}