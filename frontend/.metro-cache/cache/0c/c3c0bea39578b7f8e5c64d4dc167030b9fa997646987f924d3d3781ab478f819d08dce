{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"./auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"bPsbxvG/upGRzIWg1D65yZCgVZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _auth = require(_dependencyMap[1], \"./auth\");\n  const BASE_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function getHeaders(withAuth = true) {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (withAuth) {\n      const token = await (0, _auth.getToken)();\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n    return headers;\n  }\n  async function request(path, options = {}, withAuth = true) {\n    const headers = await getHeaders(withAuth);\n    const response = await fetch(`${BASE_URL}/api${path}`, {\n      ...options,\n      headers: {\n        ...headers,\n        ...(options.headers || {})\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.detail || data.message || 'Request failed');\n    }\n    return data;\n  }\n  const api = {\n    // Auth\n    register: (username, email, password) => request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        email,\n        password\n      })\n    }, false),\n    login: (email, password) => request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }, false),\n    getMe: () => request('/auth/me'),\n    // Runs\n    startRun: () => request('/runs/start', {\n      method: 'POST'\n    }),\n    endRun: (runId, coordinates) => request('/runs/end', {\n      method: 'POST',\n      body: JSON.stringify({\n        runId,\n        coordinates\n      })\n    }),\n    getUserRuns: userId => request(`/runs/${userId}`),\n    getRunDetail: runId => request(`/runs/detail/${runId}`),\n    // Territories\n    getTerritories: (minLng, minLat, maxLng, maxLat) => request(`/territories?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`),\n    getUserTerritories: userId => request(`/territories/user/${userId}`),\n    // Leaderboard\n    getGlobalLeaderboard: () => request('/leaderboard/global'),\n    // Profile\n    getUserProfile: userId => request(`/users/${userId}/profile`),\n    updateProfile: (userId, data) => request(`/users/${userId}/profile`, {\n      method: 'PUT',\n      body: JSON.stringify(data)\n    })\n  };\n});","lineCount":86,"map":[[7,2,31,0,"Object"],[7,8,31,0],[7,9,31,0,"defineProperty"],[7,23,31,0],[7,24,31,0,"exports"],[7,31,31,0],[8,4,31,0,"enumerable"],[8,14,31,0],[9,4,31,0,"get"],[9,7,31,0],[9,18,31,0,"get"],[9,19,31,0],[10,6,31,0],[10,13,31,0,"api"],[10,16,31,0],[11,4,31,0],[12,2,31,0],[13,2,65,2],[13,6,65,2,"_expoVirtualEnv"],[13,21,65,2],[13,24,65,2,"require"],[13,31,65,2],[13,32,65,2,"_dependencyMap"],[13,46,65,2],[14,2,1,0],[14,6,1,0,"_auth"],[14,11,1,0],[14,14,1,0,"require"],[14,21,1,0],[14,22,1,0,"_dependencyMap"],[14,36,1,0],[15,2,3,0],[15,8,3,6,"BASE_URL"],[15,16,3,14],[15,19,3,17,"_expoVirtualEnv"],[15,34,3,17],[15,35,3,17,"env"],[15,38,3,17],[15,39,3,17,"EXPO_PUBLIC_BACKEND_URL"],[15,62,3,17],[15,66,3,56],[15,68,3,58],[16,2,5,0],[16,17,5,15,"getHeaders"],[16,27,5,25,"getHeaders"],[16,28,5,26,"withAuth"],[16,36,5,34],[16,39,5,37],[16,43,5,41],[16,45,5,76],[17,4,6,2],[17,10,6,8,"headers"],[17,17,6,39],[17,20,6,42],[18,6,7,4],[18,20,7,18],[18,22,7,20],[19,4,8,2],[19,5,8,3],[20,4,9,2],[20,8,9,6,"withAuth"],[20,16,9,14],[20,18,9,16],[21,6,10,4],[21,12,10,10,"token"],[21,17,10,15],[21,20,10,18],[21,26,10,24],[21,30,10,24,"getToken"],[21,35,10,32],[21,36,10,32,"getToken"],[21,44,10,32],[21,46,10,33],[21,47,10,34],[22,6,11,4],[22,10,11,8,"token"],[22,15,11,13],[22,17,11,15],[23,8,12,6,"headers"],[23,15,12,13],[23,16,12,14],[23,31,12,29],[23,32,12,30],[23,35,12,33],[23,45,12,43,"token"],[23,50,12,48],[23,52,12,50],[24,6,13,4],[25,4,14,2],[26,4,15,2],[26,11,15,9,"headers"],[26,18,15,16],[27,2,16,0],[28,2,18,0],[28,17,18,15,"request"],[28,24,18,22,"request"],[28,25,18,26,"path"],[28,29,18,38],[28,31,18,40,"options"],[28,38,18,60],[28,41,18,63],[28,42,18,64],[28,43,18,65],[28,45,18,67,"withAuth"],[28,53,18,75],[28,56,18,78],[28,60,18,82],[28,62,18,96],[29,4,19,2],[29,10,19,8,"headers"],[29,17,19,15],[29,20,19,18],[29,26,19,24,"getHeaders"],[29,36,19,34],[29,37,19,35,"withAuth"],[29,45,19,43],[29,46,19,44],[30,4,20,2],[30,10,20,8,"response"],[30,18,20,16],[30,21,20,19],[30,27,20,25,"fetch"],[30,32,20,30],[30,33,20,31],[30,36,20,34,"BASE_URL"],[30,44,20,42],[30,51,20,49,"path"],[30,55,20,53],[30,57,20,55],[30,59,20,57],[31,6,21,4],[31,9,21,7,"options"],[31,16,21,14],[32,6,22,4,"headers"],[32,13,22,11],[32,15,22,13],[33,8,22,15],[33,11,22,18,"headers"],[33,18,22,25],[34,8,22,27],[34,12,22,31,"options"],[34,19,22,38],[34,20,22,39,"headers"],[34,27,22,46],[34,31,22,50],[34,32,22,51],[34,33,22,52],[35,6,22,54],[36,4,23,2],[36,5,23,3],[36,6,23,4],[37,4,24,2],[37,10,24,8,"data"],[37,14,24,12],[37,17,24,15],[37,23,24,21,"response"],[37,31,24,29],[37,32,24,30,"json"],[37,36,24,34],[37,37,24,35],[37,38,24,36],[38,4,25,2],[38,8,25,6],[38,9,25,7,"response"],[38,17,25,15],[38,18,25,16,"ok"],[38,20,25,18],[38,22,25,20],[39,6,26,4],[39,12,26,10],[39,16,26,14,"Error"],[39,21,26,19],[39,22,26,20,"data"],[39,26,26,24],[39,27,26,25,"detail"],[39,33,26,31],[39,37,26,35,"data"],[39,41,26,39],[39,42,26,40,"message"],[39,49,26,47],[39,53,26,51],[39,69,26,67],[39,70,26,68],[40,4,27,2],[41,4,28,2],[41,11,28,9,"data"],[41,15,28,13],[42,2,29,0],[43,2,31,7],[43,8,31,13,"api"],[43,11,31,16],[43,14,31,19],[44,4,32,2],[45,4,33,2,"register"],[45,12,33,10],[45,14,33,12,"register"],[45,15,33,13,"username"],[45,23,33,29],[45,25,33,31,"email"],[45,30,33,44],[45,32,33,46,"password"],[45,40,33,62],[45,45,34,4,"request"],[45,52,34,11],[45,53,34,12],[45,69,34,28],[45,71,34,30],[46,6,34,32,"method"],[46,12,34,38],[46,14,34,40],[46,20,34,46],[47,6,34,48,"body"],[47,10,34,52],[47,12,34,54,"JSON"],[47,16,34,58],[47,17,34,59,"stringify"],[47,26,34,68],[47,27,34,69],[48,8,34,71,"username"],[48,16,34,79],[49,8,34,81,"email"],[49,13,34,86],[50,8,34,88,"password"],[51,6,34,97],[51,7,34,98],[52,4,34,100],[52,5,34,101],[52,7,34,103],[52,12,34,108],[52,13,34,109],[53,4,36,2,"login"],[53,9,36,7],[53,11,36,9,"login"],[53,12,36,10,"email"],[53,17,36,23],[53,19,36,25,"password"],[53,27,36,41],[53,32,37,4,"request"],[53,39,37,11],[53,40,37,12],[53,53,37,25],[53,55,37,27],[54,6,37,29,"method"],[54,12,37,35],[54,14,37,37],[54,20,37,43],[55,6,37,45,"body"],[55,10,37,49],[55,12,37,51,"JSON"],[55,16,37,55],[55,17,37,56,"stringify"],[55,26,37,65],[55,27,37,66],[56,8,37,68,"email"],[56,13,37,73],[57,8,37,75,"password"],[58,6,37,84],[58,7,37,85],[59,4,37,87],[59,5,37,88],[59,7,37,90],[59,12,37,95],[59,13,37,96],[60,4,39,2,"getMe"],[60,9,39,7],[60,11,39,9,"getMe"],[60,12,39,9],[60,17,39,15,"request"],[60,24,39,22],[60,25,39,23],[60,35,39,33],[60,36,39,34],[61,4,41,2],[62,4,42,2,"startRun"],[62,12,42,10],[62,14,42,12,"startRun"],[62,15,42,12],[62,20,42,18,"request"],[62,27,42,25],[62,28,42,26],[62,41,42,39],[62,43,42,41],[63,6,42,43,"method"],[63,12,42,49],[63,14,42,51],[64,4,42,58],[64,5,42,59],[64,6,42,60],[65,4,44,2,"endRun"],[65,10,44,8],[65,12,44,10,"endRun"],[65,13,44,11,"runId"],[65,18,44,24],[65,20,44,26,"coordinates"],[65,31,44,49],[65,36,45,4,"request"],[65,43,45,11],[65,44,45,12],[65,55,45,23],[65,57,45,25],[66,6,45,27,"method"],[66,12,45,33],[66,14,45,35],[66,20,45,41],[67,6,45,43,"body"],[67,10,45,47],[67,12,45,49,"JSON"],[67,16,45,53],[67,17,45,54,"stringify"],[67,26,45,63],[67,27,45,64],[68,8,45,66,"runId"],[68,13,45,71],[69,8,45,73,"coordinates"],[70,6,45,85],[70,7,45,86],[71,4,45,88],[71,5,45,89],[71,6,45,90],[72,4,47,2,"getUserRuns"],[72,15,47,13],[72,17,47,16,"userId"],[72,23,47,30],[72,27,47,35,"request"],[72,34,47,42],[72,35,47,43],[72,44,47,52,"userId"],[72,50,47,58],[72,52,47,60],[72,53,47,61],[73,4,49,2,"getRunDetail"],[73,16,49,14],[73,18,49,17,"runId"],[73,23,49,30],[73,27,49,35,"request"],[73,34,49,42],[73,35,49,43],[73,51,49,59,"runId"],[73,56,49,64],[73,58,49,66],[73,59,49,67],[74,4,51,2],[75,4,52,2,"getTerritories"],[75,18,52,16],[75,20,52,18,"getTerritories"],[75,21,52,19,"minLng"],[75,27,52,33],[75,29,52,35,"minLat"],[75,35,52,49],[75,37,52,51,"maxLng"],[75,43,52,65],[75,45,52,67,"maxLat"],[75,51,52,81],[75,56,53,4,"request"],[75,63,53,11],[75,64,53,12],[75,87,53,35,"minLng"],[75,93,53,41],[75,104,53,52,"minLat"],[75,110,53,58],[75,121,53,69,"maxLng"],[75,127,53,75],[75,138,53,86,"maxLat"],[75,144,53,92],[75,146,53,94],[75,147,53,95],[76,4,55,2,"getUserTerritories"],[76,22,55,20],[76,24,55,23,"userId"],[76,30,55,37],[76,34,55,42,"request"],[76,41,55,49],[76,42,55,50],[76,63,55,71,"userId"],[76,69,55,77],[76,71,55,79],[76,72,55,80],[77,4,57,2],[78,4,58,2,"getGlobalLeaderboard"],[78,24,58,22],[78,26,58,24,"getGlobalLeaderboard"],[78,27,58,24],[78,32,58,30,"request"],[78,39,58,37],[78,40,58,38],[78,61,58,59],[78,62,58,60],[79,4,60,2],[80,4,61,2,"getUserProfile"],[80,18,61,16],[80,20,61,19,"userId"],[80,26,61,33],[80,30,61,38,"request"],[80,37,61,45],[80,38,61,46],[80,48,61,56,"userId"],[80,54,61,62],[80,64,61,72],[80,65,61,73],[81,4,63,2,"updateProfile"],[81,17,63,15],[81,19,63,17,"updateProfile"],[81,20,63,18,"userId"],[81,26,63,32],[81,28,63,34,"data"],[81,32,63,81],[81,37,64,4,"request"],[81,44,64,11],[81,45,64,12],[81,55,64,22,"userId"],[81,61,64,28],[81,71,64,38],[81,73,64,40],[82,6,64,42,"method"],[82,12,64,48],[82,14,64,50],[82,19,64,55],[83,6,64,57,"body"],[83,10,64,61],[83,12,64,63,"JSON"],[83,16,64,67],[83,17,64,68,"stringify"],[83,26,64,77],[83,27,64,78,"data"],[83,31,64,82],[84,4,64,84],[84,5,64,85],[85,2,65,0],[85,3,65,1],[86,0,65,2],[86,3]],"functionMap":{"names":["<global>","getHeaders","request","register","login","getMe","startRun","endRun","getUserRuns","getRunDetail","getTerritories","getUserTerritories","getGlobalLeaderboard","getUserProfile","updateProfile"],"mappings":"AAA;ACI;CDW;AEE;CFW;YGI;6GHC;SIE;gGJC;SKE,yBL;YMG,gDN;UOE;0FPC;eQE,8CR;gBSE,mDT;kBUG;+FVC;sBWE,0DX;wBYG,oCZ;kBaG,uDb;iBcE;sFdC"},"hasCjsExports":false},"type":"js/module"}]}