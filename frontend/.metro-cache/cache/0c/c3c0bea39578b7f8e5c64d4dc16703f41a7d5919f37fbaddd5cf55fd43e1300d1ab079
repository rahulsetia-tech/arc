{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"./auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"bPsbxvG/upGRzIWg1D65yZCgVZE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _auth = require(_dependencyMap[1], \"./auth\");\n  // Use full backend URL for API calls on all platforms\n  const BASE_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function getHeaders(withAuth = true) {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (withAuth) {\n      const token = await (0, _auth.getToken)();\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n    }\n    return headers;\n  }\n  async function request(path, options = {}, withAuth = true) {\n    const headers = await getHeaders(withAuth);\n    const response = await fetch(`${BASE_URL}/api${path}`, {\n      ...options,\n      headers: {\n        ...headers,\n        ...(options.headers || {})\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.detail || data.message || 'Request failed');\n    }\n    return data;\n  }\n  const api = {\n    // Auth\n    register: (username, email, password) => request('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify({\n        username,\n        email,\n        password\n      })\n    }, false),\n    login: (email, password) => request('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }, false),\n    getMe: () => request('/auth/me'),\n    // Runs\n    startRun: () => request('/runs/start', {\n      method: 'POST'\n    }),\n    endRun: (runId, coordinates) => request('/runs/end', {\n      method: 'POST',\n      body: JSON.stringify({\n        runId,\n        coordinates\n      })\n    }),\n    getUserRuns: userId => request(`/runs/${userId}`),\n    getRunDetail: runId => request(`/runs/detail/${runId}`),\n    // Territories\n    getTerritories: (minLng, minLat, maxLng, maxLat) => request(`/territories?minLng=${minLng}&minLat=${minLat}&maxLng=${maxLng}&maxLat=${maxLat}`),\n    getUserTerritories: userId => request(`/territories/user/${userId}`),\n    // Leaderboard\n    getGlobalLeaderboard: () => request('/leaderboard/global'),\n    // FIX 4: Local leaderboard\n    getLocalLeaderboard: (lat, lng, radiusKm = 20) => request(`/leaderboard/local?lat=${lat}&lng=${lng}&radius_km=${radiusKm}`),\n    // Profile\n    getUserProfile: userId => request(`/users/${userId}/profile`),\n    updateProfile: (userId, data) => request(`/users/${userId}/profile`, {\n      method: 'PUT',\n      body: JSON.stringify(data)\n    })\n  };\n});","lineCount":89,"map":[[7,2,32,0,"Object"],[7,8,32,0],[7,9,32,0,"defineProperty"],[7,23,32,0],[7,24,32,0,"exports"],[7,31,32,0],[8,4,32,0,"enumerable"],[8,14,32,0],[9,4,32,0,"get"],[9,7,32,0],[9,18,32,0,"get"],[9,19,32,0],[10,6,32,0],[10,13,32,0,"api"],[10,16,32,0],[11,4,32,0],[12,2,32,0],[13,2,70,2],[13,6,70,2,"_expoVirtualEnv"],[13,21,70,2],[13,24,70,2,"require"],[13,31,70,2],[13,32,70,2,"_dependencyMap"],[13,46,70,2],[14,2,1,0],[14,6,1,0,"_auth"],[14,11,1,0],[14,14,1,0,"require"],[14,21,1,0],[14,22,1,0,"_dependencyMap"],[14,36,1,0],[15,2,3,0],[16,2,4,0],[16,8,4,6,"BASE_URL"],[16,16,4,14],[16,19,4,17,"_expoVirtualEnv"],[16,34,4,17],[16,35,4,17,"env"],[16,38,4,17],[16,39,4,17,"EXPO_PUBLIC_BACKEND_URL"],[16,62,4,17],[16,66,4,56],[16,68,4,58],[17,2,6,0],[17,17,6,15,"getHeaders"],[17,27,6,25,"getHeaders"],[17,28,6,26,"withAuth"],[17,36,6,34],[17,39,6,37],[17,43,6,41],[17,45,6,76],[18,4,7,2],[18,10,7,8,"headers"],[18,17,7,39],[18,20,7,42],[19,6,8,4],[19,20,8,18],[19,22,8,20],[20,4,9,2],[20,5,9,3],[21,4,10,2],[21,8,10,6,"withAuth"],[21,16,10,14],[21,18,10,16],[22,6,11,4],[22,12,11,10,"token"],[22,17,11,15],[22,20,11,18],[22,26,11,24],[22,30,11,24,"getToken"],[22,35,11,32],[22,36,11,32,"getToken"],[22,44,11,32],[22,46,11,33],[22,47,11,34],[23,6,12,4],[23,10,12,8,"token"],[23,15,12,13],[23,17,12,15],[24,8,13,6,"headers"],[24,15,13,13],[24,16,13,14],[24,31,13,29],[24,32,13,30],[24,35,13,33],[24,45,13,43,"token"],[24,50,13,48],[24,52,13,50],[25,6,14,4],[26,4,15,2],[27,4,16,2],[27,11,16,9,"headers"],[27,18,16,16],[28,2,17,0],[29,2,19,0],[29,17,19,15,"request"],[29,24,19,22,"request"],[29,25,19,26,"path"],[29,29,19,38],[29,31,19,40,"options"],[29,38,19,60],[29,41,19,63],[29,42,19,64],[29,43,19,65],[29,45,19,67,"withAuth"],[29,53,19,75],[29,56,19,78],[29,60,19,82],[29,62,19,96],[30,4,20,2],[30,10,20,8,"headers"],[30,17,20,15],[30,20,20,18],[30,26,20,24,"getHeaders"],[30,36,20,34],[30,37,20,35,"withAuth"],[30,45,20,43],[30,46,20,44],[31,4,21,2],[31,10,21,8,"response"],[31,18,21,16],[31,21,21,19],[31,27,21,25,"fetch"],[31,32,21,30],[31,33,21,31],[31,36,21,34,"BASE_URL"],[31,44,21,42],[31,51,21,49,"path"],[31,55,21,53],[31,57,21,55],[31,59,21,57],[32,6,22,4],[32,9,22,7,"options"],[32,16,22,14],[33,6,23,4,"headers"],[33,13,23,11],[33,15,23,13],[34,8,23,15],[34,11,23,18,"headers"],[34,18,23,25],[35,8,23,27],[35,12,23,31,"options"],[35,19,23,38],[35,20,23,39,"headers"],[35,27,23,46],[35,31,23,50],[35,32,23,51],[35,33,23,52],[36,6,23,54],[37,4,24,2],[37,5,24,3],[37,6,24,4],[38,4,25,2],[38,10,25,8,"data"],[38,14,25,12],[38,17,25,15],[38,23,25,21,"response"],[38,31,25,29],[38,32,25,30,"json"],[38,36,25,34],[38,37,25,35],[38,38,25,36],[39,4,26,2],[39,8,26,6],[39,9,26,7,"response"],[39,17,26,15],[39,18,26,16,"ok"],[39,20,26,18],[39,22,26,20],[40,6,27,4],[40,12,27,10],[40,16,27,14,"Error"],[40,21,27,19],[40,22,27,20,"data"],[40,26,27,24],[40,27,27,25,"detail"],[40,33,27,31],[40,37,27,35,"data"],[40,41,27,39],[40,42,27,40,"message"],[40,49,27,47],[40,53,27,51],[40,69,27,67],[40,70,27,68],[41,4,28,2],[42,4,29,2],[42,11,29,9,"data"],[42,15,29,13],[43,2,30,0],[44,2,32,7],[44,8,32,13,"api"],[44,11,32,16],[44,14,32,19],[45,4,33,2],[46,4,34,2,"register"],[46,12,34,10],[46,14,34,12,"register"],[46,15,34,13,"username"],[46,23,34,29],[46,25,34,31,"email"],[46,30,34,44],[46,32,34,46,"password"],[46,40,34,62],[46,45,35,4,"request"],[46,52,35,11],[46,53,35,12],[46,69,35,28],[46,71,35,30],[47,6,35,32,"method"],[47,12,35,38],[47,14,35,40],[47,20,35,46],[48,6,35,48,"body"],[48,10,35,52],[48,12,35,54,"JSON"],[48,16,35,58],[48,17,35,59,"stringify"],[48,26,35,68],[48,27,35,69],[49,8,35,71,"username"],[49,16,35,79],[50,8,35,81,"email"],[50,13,35,86],[51,8,35,88,"password"],[52,6,35,97],[52,7,35,98],[53,4,35,100],[53,5,35,101],[53,7,35,103],[53,12,35,108],[53,13,35,109],[54,4,37,2,"login"],[54,9,37,7],[54,11,37,9,"login"],[54,12,37,10,"email"],[54,17,37,23],[54,19,37,25,"password"],[54,27,37,41],[54,32,38,4,"request"],[54,39,38,11],[54,40,38,12],[54,53,38,25],[54,55,38,27],[55,6,38,29,"method"],[55,12,38,35],[55,14,38,37],[55,20,38,43],[56,6,38,45,"body"],[56,10,38,49],[56,12,38,51,"JSON"],[56,16,38,55],[56,17,38,56,"stringify"],[56,26,38,65],[56,27,38,66],[57,8,38,68,"email"],[57,13,38,73],[58,8,38,75,"password"],[59,6,38,84],[59,7,38,85],[60,4,38,87],[60,5,38,88],[60,7,38,90],[60,12,38,95],[60,13,38,96],[61,4,40,2,"getMe"],[61,9,40,7],[61,11,40,9,"getMe"],[61,12,40,9],[61,17,40,15,"request"],[61,24,40,22],[61,25,40,23],[61,35,40,33],[61,36,40,34],[62,4,42,2],[63,4,43,2,"startRun"],[63,12,43,10],[63,14,43,12,"startRun"],[63,15,43,12],[63,20,43,18,"request"],[63,27,43,25],[63,28,43,26],[63,41,43,39],[63,43,43,41],[64,6,43,43,"method"],[64,12,43,49],[64,14,43,51],[65,4,43,58],[65,5,43,59],[65,6,43,60],[66,4,45,2,"endRun"],[66,10,45,8],[66,12,45,10,"endRun"],[66,13,45,11,"runId"],[66,18,45,24],[66,20,45,26,"coordinates"],[66,31,45,49],[66,36,46,4,"request"],[66,43,46,11],[66,44,46,12],[66,55,46,23],[66,57,46,25],[67,6,46,27,"method"],[67,12,46,33],[67,14,46,35],[67,20,46,41],[68,6,46,43,"body"],[68,10,46,47],[68,12,46,49,"JSON"],[68,16,46,53],[68,17,46,54,"stringify"],[68,26,46,63],[68,27,46,64],[69,8,46,66,"runId"],[69,13,46,71],[70,8,46,73,"coordinates"],[71,6,46,85],[71,7,46,86],[72,4,46,88],[72,5,46,89],[72,6,46,90],[73,4,48,2,"getUserRuns"],[73,15,48,13],[73,17,48,16,"userId"],[73,23,48,30],[73,27,48,35,"request"],[73,34,48,42],[73,35,48,43],[73,44,48,52,"userId"],[73,50,48,58],[73,52,48,60],[73,53,48,61],[74,4,50,2,"getRunDetail"],[74,16,50,14],[74,18,50,17,"runId"],[74,23,50,30],[74,27,50,35,"request"],[74,34,50,42],[74,35,50,43],[74,51,50,59,"runId"],[74,56,50,64],[74,58,50,66],[74,59,50,67],[75,4,52,2],[76,4,53,2,"getTerritories"],[76,18,53,16],[76,20,53,18,"getTerritories"],[76,21,53,19,"minLng"],[76,27,53,33],[76,29,53,35,"minLat"],[76,35,53,49],[76,37,53,51,"maxLng"],[76,43,53,65],[76,45,53,67,"maxLat"],[76,51,53,81],[76,56,54,4,"request"],[76,63,54,11],[76,64,54,12],[76,87,54,35,"minLng"],[76,93,54,41],[76,104,54,52,"minLat"],[76,110,54,58],[76,121,54,69,"maxLng"],[76,127,54,75],[76,138,54,86,"maxLat"],[76,144,54,92],[76,146,54,94],[76,147,54,95],[77,4,56,2,"getUserTerritories"],[77,22,56,20],[77,24,56,23,"userId"],[77,30,56,37],[77,34,56,42,"request"],[77,41,56,49],[77,42,56,50],[77,63,56,71,"userId"],[77,69,56,77],[77,71,56,79],[77,72,56,80],[78,4,58,2],[79,4,59,2,"getGlobalLeaderboard"],[79,24,59,22],[79,26,59,24,"getGlobalLeaderboard"],[79,27,59,24],[79,32,59,30,"request"],[79,39,59,37],[79,40,59,38],[79,61,59,59],[79,62,59,60],[80,4,61,2],[81,4,62,2,"getLocalLeaderboard"],[81,23,62,21],[81,25,62,23,"getLocalLeaderboard"],[81,26,62,24,"lat"],[81,29,62,35],[81,31,62,37,"lng"],[81,34,62,48],[81,36,62,50,"radiusKm"],[81,44,62,66],[81,47,62,69],[81,49,62,71],[81,54,63,4,"request"],[81,61,63,11],[81,62,63,12],[81,88,63,38,"lat"],[81,91,63,41],[81,99,63,49,"lng"],[81,102,63,52],[81,116,63,66,"radiusKm"],[81,124,63,74],[81,126,63,76],[81,127,63,77],[82,4,65,2],[83,4,66,2,"getUserProfile"],[83,18,66,16],[83,20,66,19,"userId"],[83,26,66,33],[83,30,66,38,"request"],[83,37,66,45],[83,38,66,46],[83,48,66,56,"userId"],[83,54,66,62],[83,64,66,72],[83,65,66,73],[84,4,68,2,"updateProfile"],[84,17,68,15],[84,19,68,17,"updateProfile"],[84,20,68,18,"userId"],[84,26,68,32],[84,28,68,34,"data"],[84,32,68,81],[84,37,69,4,"request"],[84,44,69,11],[84,45,69,12],[84,55,69,22,"userId"],[84,61,69,28],[84,71,69,38],[84,73,69,40],[85,6,69,42,"method"],[85,12,69,48],[85,14,69,50],[85,19,69,55],[86,6,69,57,"body"],[86,10,69,61],[86,12,69,63,"JSON"],[86,16,69,67],[86,17,69,68,"stringify"],[86,26,69,77],[86,27,69,78,"data"],[86,31,69,82],[87,4,69,84],[87,5,69,85],[88,2,70,0],[88,3,70,1],[89,0,70,2],[89,3]],"functionMap":{"names":["<global>","getHeaders","request","register","login","getMe","startRun","endRun","getUserRuns","getRunDetail","getTerritories","getUserTerritories","getGlobalLeaderboard","getLocalLeaderboard","getUserProfile","updateProfile"],"mappings":"AAA;ACK;CDW;AEE;CFW;YGI;6GHC;SIE;gGJC;SKE,yBL;YMG,gDN;UOE;0FPC;eQE,8CR;gBSE,mDT;kBUG;+FVC;sBWE,0DX;wBYG,oCZ;uBaG;6EbC;kBcG,uDd;iBeE;sFfC"},"hasCjsExports":false},"type":"js/module"}]}